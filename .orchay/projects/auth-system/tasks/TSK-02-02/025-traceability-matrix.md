# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Task ID:** TSK-02-02
**Task명:** 비밀번호 정책 및 계정 잠금
**Last Updated:** 2026-01-26

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-02-02 |
| Task명 | 비밀번호 정책 및 계정 잠금 |
| 상세설계 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-26 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

| 요구사항 ID | PRD 섹션 | 상세설계 섹션 | 단위 테스트 | 상태 |
|-------------|----------|--------------|-------------|------|
| FR-02-06 | 4.1.4 | 3.2 | UT-02-20 | 완료 |
| FR-02-07 | 4.1.4 | 3.3 | UT-02-21 | 완료 |
| FR-02-08 | 4.1.4 | 5.1 | UT-02-22~UT-02-27 | 완료 |
| FR-02-09 | 4.1.5 | 4.2 | UT-02-28 | 완료 |
| FR-02-10 | 4.1.5 | 4.3 | UT-02-29 | 완료 |

### 1.1 요구사항별 상세 매핑

#### FR-02-06: GET /api/auth/password-policy

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.4 | 비밀번호 정책 조회 |
| 상세설계 | 010-design.md | 3.2 | GET /api/auth/password-policy |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-02-20 |

#### FR-02-07: POST /api/auth/validate-password

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.4 | 비밀번호 복잡도 검증 |
| 상세설계 | 010-design.md | 3.3 | POST /api/auth/validate-password |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-02-21 |

#### FR-02-08: zod 비밀번호 스키마

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.4 | 비밀번호 복잡도 검증 |
| 상세설계 | 010-design.md | 5.1 | passwordSchema |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-02-22~UT-02-27 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 상세설계 섹션 | 구현 위치 | 단위 테스트 | 검증 방법 | 상태 |
|---------|----------|--------------|-----------|-------------|-----------|------|
| BR-02-04 | 4.1.4 | 4.1 | lib/auth/password-schema.ts | UT-02-22~UT-02-27 | 복잡도 규칙 검증 | 완료 |
| BR-02-05 | 4.1.4 | 4.2 | /api/auth/login | UT-02-28 | 90일 만료 체크 | 완료 |
| BR-02-06 | 4.1.4 | 4.3 | lib/auth/password.ts | UT-02-29 | 5개 이력 비교 | 완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-02-04: 비밀번호 복잡도 규칙

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 최소 8자, 대문자, 소문자, 숫자, 특수문자 포함 |
| **구현 위치** | lib/auth/password-schema.ts |
| **검증 방법** | zod 스키마 검증 |
| **관련 테스트** | UT-02-22~UT-02-27 |

#### BR-02-05: 비밀번호 만료 (90일)

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 비밀번호 90일 만료, 7일 전 알림 |
| **구현 위치** | /api/auth/login (만료 체크) |
| **검증 방법** | passwordChangedAt + 90일 비교 |
| **관련 테스트** | UT-02-28 |

#### BR-02-06: 비밀번호 이력 (재사용 금지)

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 최근 5개 비밀번호 재사용 금지 |
| **구현 위치** | lib/auth/password.ts (checkPasswordHistory) |
| **검증 방법** | bcrypt.compare로 이력 비교 |
| **관련 테스트** | UT-02-29 |

---

## 3. 테스트 역추적 매트릭스

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-02-20 | 단위 | FR-02-06 | - | PASS |
| UT-02-21 | 단위 | FR-02-07 | - | PASS |
| UT-02-22 | 단위 | FR-02-08 | BR-02-04 | PASS |
| UT-02-23 | 단위 | FR-02-08 | BR-02-04 | PASS |
| UT-02-24 | 단위 | FR-02-08 | BR-02-04 | PASS |
| UT-02-25 | 단위 | FR-02-08 | BR-02-04 | PASS |
| UT-02-26 | 단위 | FR-02-08 | BR-02-04 | PASS |
| UT-02-27 | 단위 | FR-02-08 | BR-02-04 | PASS |
| UT-02-28 | 단위 | FR-02-09 | BR-02-05 | PASS |
| UT-02-29 | 단위 | FR-02-10 | BR-02-06 | PASS |

---

## 4. 인터페이스 추적

| 상세설계 API | Method | Endpoint | 구현 파일 | 요구사항 |
|-------------|--------|----------|----------|----------|
| 비밀번호 정책 | GET | /api/auth/password-policy | app/api/auth/password-policy/route.ts | FR-02-06 |
| 비밀번호 검증 | POST | /api/auth/validate-password | app/api/auth/validate-password/route.ts | FR-02-07 |

---

## 5. 추적성 검증 요약

### 5.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 5 | 5 | 0 | 100% |
| 비즈니스 규칙 (BR) | 3 | 3 | 0 | 100% |
| 단위 테스트 (UT) | 10 | 10 | 0 | 100% |

### 5.2 미매핑 항목

없음

---

## 관련 문서

- 상세설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/auth-system/prd.md`
- TRD: `.orchay/projects/auth-system/trd.md`
