# 요구사항 추적 매트릭스 (025-traceability-matrix.md)

**Task ID:** TSK-03-02
**Task명:** 메뉴/API 접근 제어 미들웨어
**Last Updated:** 2026-01-26

---

## 1. PRD → 설계 추적

| PRD 요구사항 | 설계 문서 섹션 | 구현 컴포넌트 |
|-------------|---------------|--------------|
| PRD 4.2.5 API 접근 제어 | 010-design.md 4.2 | lib/auth/ability.ts, lib/auth/api-guard.ts |
| PRD 4.2.7 권한 기반 메뉴 필터링 | 010-design.md 4.3 | lib/auth/menu-filter.ts |

---

## 2. 설계 → 테스트 추적

| 설계 항목 | 테스트 ID | 테스트 설명 |
|----------|----------|------------|
| CASL Ability | UT-ABILITY-001~009 | Ability 생성 및 권한 체크 테스트 |
| 메뉴 필터링 | UT-MENU-001~010 | 메뉴 필터링, 부모 메뉴 포함 테스트 |
| API Guard | UT-GUARD-001~014 | 인증/권한 가드 테스트 |

---

## 3. 비즈니스 규칙 추적

| 규칙 ID | 설명 | 테스트 ID | 구현 위치 |
|---------|------|----------|----------|
| BR-03-04 | 하위 역할 권한 자동 상속 | UT-ABILITY-004, UT-GUARD-008 | ability.ts 'manage' 처리 |
| BR-03-05 | 부모 메뉴 자동 포함 | UT-MENU-003, UT-MENU-005~007 | menu-filter.ts includeParentMenus |

---

## 4. 커버리지 매트릭스

| 기능 | 단위 테스트 | 통합 테스트 | E2E 테스트 |
|-----|------------|------------|-----------|
| CASL Ability | ✅ 9개 | - | - |
| 메뉴 필터링 | ✅ 10개 | - | - |
| API Guard | ✅ 14개 | - | - |

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|-----|------|--------|----------|
| 1.0 | 2026-01-26 | Claude | 최초 작성 |
