# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-20

> **목적**: PRD → 설계 → 테스트 양방향 추적

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-01-02 |
| Task명 | 헤더 컴포넌트 |
| 설계 문서 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-20 |
| 작성자 | AI |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------|-------------|------------|-----------|------|
| FR-001 | 4.1.1 로고 | 5.1, 12.1 | UT-001 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.1.1 빠른 메뉴 | 5.2, 12.1 | UT-002 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 4.1.1 브레드크럼 | 5.2, 12.1 | UT-003 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 4.1.1 시스템 시계 | 5.2, 12.1 | UT-004 | E2E-004 | TC-004 | 설계완료 |
| FR-005 | 4.1.1 전역 검색 | 5.2, 12.1 | UT-005 | E2E-005 | TC-005 | 설계완료 |
| FR-006 | 4.1.1 알림 | 5.2, 12.1 | UT-006 | E2E-006 | TC-006 | 설계완료 |
| FR-007 | 4.1.1 테마 전환 | 5.2, 12.1 | UT-007 | E2E-007 | TC-007 | 설계완료 |
| FR-008 | 4.1.1 프로필 메뉴 | 5.2, 5.3, 12.1 | UT-008 | E2E-008 | TC-008 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 로고 (홈 이동)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 로고 영역 |
| 설계 | 010-design.md | 5.1, UC-01 | 로고 클릭 시 홈 이동 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001: 로고 렌더링 및 링크 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001: 로고 클릭 홈 이동 |

#### FR-002: 빠른 메뉴 (즐겨찾기)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 빠른 메뉴 버튼 |
| 설계 | 010-design.md | 5.2, UC-02 | 즐겨찾기 드롭다운 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-002: 빠른 메뉴 드롭다운 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002: 즐겨찾기 접근 |

#### FR-003: 브레드크럼

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 브레드크럼 |
| 설계 | 010-design.md | 5.2, UC-03 | 현재 위치 경로 표시 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-003: 브레드크럼 렌더링 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003: 브레드크럼 표시 |

#### FR-004: 시스템 시계

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 시스템 시계 |
| 설계 | 010-design.md | 5.2, UC-04 | 실시간 시계 갱신 (1초) |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-004: 시계 갱신 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-004: 시계 표시 |

#### FR-005: 전역 검색

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 전역 검색 (Ctrl+K) |
| 설계 | 010-design.md | 5.2, UC-05, 6.2 | 검색 버튼 + Ctrl+K 단축키 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-005: 검색 버튼 및 단축키 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-005: Ctrl+K 검색 모달 |

#### FR-006: 알림

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 알림 아이콘 |
| 설계 | 010-design.md | 5.2, UC-06 | 알림 뱃지 및 클릭 핸들러 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-006: 알림 뱃지 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-006: 알림 아이콘 클릭 |

#### FR-007: 테마 전환

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 테마 전환 버튼 |
| 설계 | 010-design.md | 5.2, UC-07 | 라이트/다크 모드 토글 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-007: 테마 토글 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-007: 테마 전환 동작 |

#### FR-008: 프로필 메뉴

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 헤더(Header) - 사용자 프로필 |
| 설계 | 010-design.md | 5.2, 5.3, UC-08 | 프로필 드롭다운 메뉴 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-008: 프로필 드롭다운 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-008: 프로필 메뉴 동작 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|-----------|------|
| BR-001 | 4.1.1 | 8.1 | Header.tsx | UT-009 | 로고 클릭 시 "/" 경로 이동 확인 | 설계완료 |
| BR-002 | 4.1.1 | 8.1 | Header.tsx | UT-010 | 시계 1초마다 갱신 확인 | 설계완료 |
| BR-003 | 4.1.1 | 8.1 | Header.tsx + next-themes | UT-011 | 테마 localStorage 저장 확인 | 설계완료 |
| BR-004 | 4.1.1 | 8.1 | Header.tsx | UT-012 | 브레드크럼 활성 탭 경로 표시 확인 | 설계완료 |
| BR-005 | 4.1.1 | 8.1, 6.2 | Header.tsx + react-hotkeys-hook | UT-013 | Ctrl+K 단축키 동작 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 로고 클릭은 항상 "/" 경로로 이동

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 로고 클릭 시 메인 대시보드(홈)로 이동 |
| **설계 표현** | Link href="/" 컴포넌트 사용 |
| **구현 위치** | Header.tsx - 로고 영역 |
| **검증 방법** | 로고 클릭 후 URL "/" 확인 |
| **관련 테스트** | UT-009, E2E-001 |

#### BR-002: 시계는 1초마다 갱신

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 시스템 시계 실시간 갱신 |
| **설계 표현** | setInterval 1000ms로 시간 업데이트 |
| **구현 위치** | Header.tsx - useEffect 내 timer |
| **검증 방법** | 1초 대기 후 시간 변경 확인 |
| **관련 테스트** | UT-010, E2E-004 |

#### BR-003: 테마 설정은 localStorage에 저장

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 테마 설정 세션 간 유지 |
| **설계 표현** | next-themes 라이브러리 사용 (자동 localStorage 저장) |
| **구현 위치** | Header.tsx - useTheme 훅 |
| **검증 방법** | 테마 변경 후 새로고침 시 유지 확인 |
| **관련 테스트** | UT-011, E2E-007 |

#### BR-004: 브레드크럼은 현재 활성 탭의 메뉴 경로 표시

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 현재 위치 경로 표시 (대메뉴 > 중메뉴 > 소메뉴) |
| **설계 표현** | breadcrumbItems prop으로 경로 전달 |
| **구현 위치** | Header.tsx - Breadcrumb 컴포넌트 |
| **검증 방법** | 메뉴 이동 시 브레드크럼 업데이트 확인 |
| **관련 테스트** | UT-012, E2E-003 |

#### BR-005: 검색 모달은 Ctrl+K로 토글

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 전역 검색 (Ctrl+K 단축키) |
| **설계 표현** | react-hotkeys-hook으로 단축키 등록 |
| **구현 위치** | Header.tsx - useHotkeys 훅 |
| **검증 방법** | Ctrl+K 입력 시 onSearchOpen 콜백 호출 확인 |
| **관련 테스트** | UT-013, E2E-005 |

---

## 3. 테스트 역추적 매트릭스

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-002 | - | 미실행 |
| UT-003 | 단위 | FR-003 | - | 미실행 |
| UT-004 | 단위 | FR-004 | - | 미실행 |
| UT-005 | 단위 | FR-005 | - | 미실행 |
| UT-006 | 단위 | FR-006 | - | 미실행 |
| UT-007 | 단위 | FR-007 | - | 미실행 |
| UT-008 | 단위 | FR-008 | - | 미실행 |
| UT-009 | 단위 | - | BR-001 | 미실행 |
| UT-010 | 단위 | - | BR-002 | 미실행 |
| UT-011 | 단위 | - | BR-003 | 미실행 |
| UT-012 | 단위 | - | BR-004 | 미실행 |
| UT-013 | 단위 | - | BR-005 | 미실행 |
| E2E-001 | E2E | FR-001 | BR-001 | 미실행 |
| E2E-002 | E2E | FR-002 | - | 미실행 |
| E2E-003 | E2E | FR-003 | BR-004 | 미실행 |
| E2E-004 | E2E | FR-004 | BR-002 | 미실행 |
| E2E-005 | E2E | FR-005 | BR-005 | 미실행 |
| E2E-006 | E2E | FR-006 | - | 미실행 |
| E2E-007 | E2E | FR-007 | BR-003 | 미실행 |
| E2E-008 | E2E | FR-008 | - | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | - | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-005 | 매뉴얼 | FR-005 | - | 미실행 |
| TC-006 | 매뉴얼 | FR-006 | - | 미실행 |
| TC-007 | 매뉴얼 | FR-007 | - | 미실행 |
| TC-008 | 매뉴얼 | FR-008 | - | 미실행 |

---

## 4. 데이터 모델 추적

> 이 Task는 UI 컴포넌트로 별도 데이터 모델이 없음

| 설계 엔티티 | 상태 타입 | 저장 위치 |
|------------|----------|----------|
| HeaderState | `{ isSearchOpen: boolean, isNotificationOpen: boolean, isProfileOpen: boolean }` | React State |
| UserInfo | `{ id: number, email: string, name: string, role: string, avatar?: string }` | Auth.js 세션 |
| BreadcrumbItem | `{ title: string, path?: string }` | Props |
| Theme | `'light' \| 'dark'` | localStorage (next-themes) |

---

## 5. 인터페이스 추적

> 이 Task는 API 인터페이스가 없음 (프론트엔드 컴포넌트)

---

## 6. 화면 추적

| 설계 화면 | 컴포넌트 | 경로 | 요구사항 |
|----------|----------|------|----------|
| 헤더 | Header | `components/layout/Header.tsx` | FR-001~FR-008 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 8 | 8 | 0 | 100% |
| 비즈니스 규칙 (BR) | 5 | 5 | 0 | 100% |
| 단위 테스트 (UT) | 13 | 13 | 0 | 100% |
| E2E 테스트 | 8 | 8 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 8 | 8 | 0 | 100% |

### 7.2 미매핑 항목

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | 모두 매핑 완료 |

---

## 관련 문서

- 설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`
- TRD: `.orchay/projects/mes-portal/trd.md`
