# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-20

> **목적**: PRD → 기본설계 → 테스트 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-01-03 |
| Task명 | 사이드바 메뉴 컴포넌트 |
| 설계 문서 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-20 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------|-------------|------------|-----------|------|
| FR-001 | 4.1.1 사이드바 너비 | 5.2 상태 1,2 | UT-001 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.1.1 접이식 토글 | 5.2, 6.1 | UT-002 | E2E-001 | TC-002 | 설계완료 |
| FR-003 | 4.1.1 계층형 트리 메뉴 | 5.2, 7.2 | UT-003 | E2E-002 | TC-003 | 설계완료 |
| FR-004 | 4.1.1 메뉴 아이템 구성 | 5.2, 7.2 | UT-004 | E2E-002 | TC-004 | 설계완료 |
| FR-005 | 4.1.1 호버 시 하이라이트 | 5.3, 6.1 | - | E2E-003 | TC-005 | 설계완료 |
| FR-006 | 4.1.1 현재 선택 메뉴 강조 | 5.3, 8.1 BR-03 | UT-005 | E2E-003 | TC-005 | 설계완료 |
| FR-007 | 4.1.1 접힘 상태 툴팁 | 5.2 상태 2 | - | E2E-004 | TC-006 | 설계완료 |
| FR-008 | 4.1.1 하단 토글 버튼 | 5.2 | UT-006 | E2E-001 | TC-002 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 사이드바 너비 (펼침 240px / 접힘 60px)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 너비: 펼침 240px / 접힘 60px |
| 설계 | 010-design.md | 5.2 | 상태 1: 펼침 240px, 상태 2: 접힘 60px |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 |

#### FR-002: 접이식 토글 버튼

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 접이식 토글 버튼 |
| 설계 | 010-design.md | 5.2, 6.1 | 토글 버튼 클릭 시 사이드바 너비 애니메이션 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-002 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 |

#### FR-003: 계층형 트리 메뉴 (최대 3단계)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 1/2/3단계 계층형 트리 메뉴 |
| 설계 | 010-design.md | 5.2, 7.2 | MenuItem 인터페이스, children 재귀 구조 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-003 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002 |

#### FR-004: 메뉴 아이템 구성 (아이콘 + 메뉴명 + 화살표)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 아이콘, 메뉴명, 펼침/접힘 화살표 |
| 설계 | 010-design.md | 5.2, 7.2 | Ant Design Menu, @ant-design/icons |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-004 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002 |

#### FR-005: 호버 시 하이라이트

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 호버 시 하이라이트 |
| 설계 | 010-design.md | 5.3, 6.1 | 배경색 하이라이트 (token 사용), 100ms ease |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003 |
| 매뉴얼 TC | 026-test-specification.md | 4.1 | TC-005 |

#### FR-006: 현재 선택 메뉴 강조

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 현재 선택 메뉴 강조 |
| 설계 | 010-design.md | 5.3, 8.1 | Primary 색상 배경, BR-03 규칙 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-005 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003 |

#### FR-007: 접힘 상태 호버 시 툴팁

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 접힘 상태에서 호버 시 툴팁으로 메뉴명 표시 |
| 설계 | 010-design.md | 5.2 상태 2 | 툴팁/팝업 메뉴 표시 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-004 |
| 매뉴얼 TC | 026-test-specification.md | 4.1 | TC-006 |

#### FR-008: 하단 접기/펼치기 버튼

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 사이드바 접기/펼치기 버튼 |
| 설계 | 010-design.md | 5.2 | 하단 고정 토글 버튼 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-006 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | 4.1.1 MDI | 8.1 | Sidebar + MDI Context | UT-007 | E2E-005 | 메뉴 클릭 시 탭 열림 확인 | 설계완료 |
| BR-002 | 4.1.1 MDI | 8.1 | MDI Context | UT-008 | E2E-005 | 동일 화면 재클릭 시 탭 전환 확인 | 설계완료 |
| BR-003 | 4.1.1 사이드바 | 8.1 | Sidebar | UT-005 | E2E-003 | 탭 전환 시 메뉴 강조 변경 확인 | 설계완료 |
| BR-004 | 4.1.1 사이드바 | 8.1 | Sidebar | UT-003 | E2E-002 | 4단계 메뉴 무시 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 화면 메뉴 클릭 시 MDI 탭으로 열기

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 화면(leaf) 메뉴 클릭 시 MDI 탭으로 해당 화면 열기 |
| **설계 표현** | path가 있는 메뉴 클릭 → openTab 함수 호출 |
| **구현 위치** | Sidebar 컴포넌트 + MDI Context |
| **검증 방법** | 메뉴 클릭 후 탭이 열리는지 확인 |
| **관련 테스트** | UT-007, E2E-005 |

#### BR-002: 동일 화면 중복 탭 방지

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 이미 열린 화면 메뉴 재클릭 시 기존 탭 활성화 |
| **설계 표현** | 탭 목록에서 path 비교 → 있으면 setActiveTab |
| **구현 위치** | MDI Context (openTab 함수 내부) |
| **검증 방법** | 이미 열린 화면 메뉴 클릭 시 새 탭 안 열림 확인 |
| **관련 테스트** | UT-008, E2E-005 |

#### BR-003: 현재 탭의 메뉴 경로 강조

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 현재 활성 탭과 일치하는 메뉴 강조 표시 |
| **설계 표현** | activeTab.path와 메뉴 path 비교 → selectedKeys 설정 |
| **구현 위치** | Sidebar 컴포넌트 |
| **검증 방법** | 탭 전환 시 해당 메뉴 강조 상태 변경 확인 |
| **관련 테스트** | UT-005, E2E-003 |

#### BR-004: 최대 3단계 메뉴 지원

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 계층형 트리 메뉴 최대 3단계까지 지원 |
| **설계 표현** | 3단계 초과 메뉴는 렌더링 시 무시 |
| **구현 위치** | Sidebar 메뉴 렌더링 로직 |
| **검증 방법** | 4단계 메뉴 데이터 전달 시 렌더링 안 됨 확인 |
| **관련 테스트** | UT-003, E2E-002 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-002 | - | 미실행 |
| UT-003 | 단위 | FR-003 | BR-004 | 미실행 |
| UT-004 | 단위 | FR-004 | - | 미실행 |
| UT-005 | 단위 | FR-006 | BR-003 | 미실행 |
| UT-006 | 단위 | FR-008 | - | 미실행 |
| UT-007 | 단위 | - | BR-001 | 미실행 |
| UT-008 | 단위 | - | BR-002 | 미실행 |
| E2E-001 | E2E | FR-001, FR-002, FR-008 | - | 미실행 |
| E2E-002 | E2E | FR-003, FR-004 | BR-004 | 미실행 |
| E2E-003 | E2E | FR-005, FR-006 | BR-003 | 미실행 |
| E2E-004 | E2E | FR-007 | - | 미실행 |
| E2E-005 | E2E | - | BR-001, BR-002 | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002, FR-008 | - | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-005 | 매뉴얼 | FR-005, FR-006 | BR-003 | 미실행 |
| TC-006 | 매뉴얼 | FR-007 | - | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 엔티티 → 컴포넌트 Props → 상태 매핑

| 설계 엔티티 | 컴포넌트 | Props/State | 용도 |
|------------|----------|-------------|------|
| MenuItem | Sidebar | menus: MenuItem[] | 메뉴 데이터 |
| MenuItem | Sidebar | selectedKeys: string[] | 선택된 메뉴 |
| - | Sidebar | collapsed: boolean | 접힘/펼침 상태 |
| - | Sidebar | openKeys: string[] | 펼쳐진 서브메뉴 |

---

## 5. 인터페이스 추적

> 설계 인터페이스 요구사항 → 컴포넌트 Props 매핑

| 설계 인터페이스 | 컴포넌트 Props | Type | 요구사항 |
|----------------|---------------|------|----------|
| 접힘 상태 제어 | collapsed | boolean | FR-001, FR-002 |
| 접힘 콜백 | onCollapse | (collapsed: boolean) => void | FR-002 |
| 초기 접힘 상태 | defaultCollapsed | boolean | FR-001 |
| 메뉴 데이터 | menus | MenuItem[] | FR-003, FR-004 |
| 선택 메뉴 | selectedKeys | string[] | FR-006, BR-003 |

---

## 6. 화면 추적

> 설계 화면 요구사항 → 컴포넌트 매핑

| 설계 화면 | 컴포넌트 | 파일 경로 | 요구사항 |
|----------|----------|----------|----------|
| 사이드바 펼침 상태 | Sidebar | components/layout/Sidebar.tsx | FR-001~008 |
| 사이드바 접힘 상태 | Sidebar | components/layout/Sidebar.tsx | FR-001, FR-007 |
| 메뉴 아이템 | Ant Design Menu.Item | - | FR-004, FR-005, FR-006 |
| 서브메뉴 | Ant Design Menu.SubMenu | - | FR-003 |
| 툴팁 (접힘 시) | Ant Design Tooltip | - | FR-007 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 8 | 8 | 0 | 100% |
| 비즈니스 규칙 (BR) | 4 | 4 | 0 | 100% |
| 단위 테스트 (UT) | 8 | 8 | 0 | 100% |
| E2E 테스트 | 5 | 5 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 6 | 6 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 관련 문서

- 설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`

---

<!--
TSK-01-03 사이드바 메뉴 컴포넌트
Version: 1.0
Created: 2026-01-20
-->
