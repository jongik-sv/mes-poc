# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-20

> **목적**: PRD → 설계 → 테스트 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-03-01 |
| Task명 | 메뉴 데이터 모델 |
| 설계 문서 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-20 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 상태 |
|-------------|----------|----------|-------------|------------|------|
| FR-001 | 4.1.1 동적 메뉴 | 7.3 Prisma 모델 | UT-001 | E2E-001 | 설계완료 |
| FR-002 | 4.1.1 계층형 메뉴 | 7.2 데이터 관계 | UT-002 | E2E-002 | 설계완료 |
| FR-003 | 4.1.1 메뉴 순서 | 7.3 sortOrder | UT-003 | E2E-003 | 설계완료 |
| FR-004 | 4.1.1 메뉴 아이콘 | 7.3 icon 필드 | UT-004 | - | 설계완료 |
| FR-005 | 4.1.1 메뉴 활성 상태 | 7.3 isActive | UT-005 | E2E-004 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: DB 기반 메뉴 구조 관리

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | DB 기반 메뉴 구조 관리 |
| 설계 | 010-design.md | 7.3 | Menu Prisma 모델 정의 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001: Menu 모델 CRUD |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001: 메뉴 목록 조회 |

#### FR-002: 계층형 메뉴 지원 (트리 구조)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 계층형 메뉴 지원 (트리 구조) |
| 설계 | 010-design.md | 7.2 | parentId 자기참조 관계 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-002: 계층형 메뉴 조회 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002: 3단계 메뉴 표시 |

#### FR-003: 메뉴 순서 관리

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 메뉴 순서 관리 |
| 설계 | 010-design.md | 7.3 | sortOrder 필드 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-003: 메뉴 정렬 순서 검증 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003: 메뉴 순서대로 표시 |

#### FR-004: 메뉴 아이콘 지원

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 메뉴 아이콘 지원 |
| 설계 | 010-design.md | 7.3 | icon 필드 (Ant Design 아이콘명) |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-004: 아이콘 필드 검증 |

#### FR-005: 메뉴 활성화 상태

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 메뉴 활성/비활성 관리 |
| 설계 | 010-design.md | 7.3 | isActive 필드 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-005: 비활성 메뉴 필터링 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-004: 활성 메뉴만 표시 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | 4.1.1 | 8.1 | menu.service.ts | UT-006 | E2E-005 | 중복 코드 생성 시 409 에러 확인 | 설계완료 |
| BR-002 | 4.1.1 | 8.1 | menu.service.ts | UT-007 | E2E-006 | 4단계 메뉴 생성 시 400 에러 확인 | 설계완료 |
| BR-003 | 4.1.1 | 8.1 | menu.service.ts | UT-008 | E2E-007 | 자식 있는 메뉴 삭제 시 400 에러 확인 | 설계완료 |
| BR-004 | 4.1.1 | 8.1 | menu.service.ts | UT-009 | - | 비활성 메뉴 응답 제외 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 메뉴 코드 유일성

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 메뉴 코드(code)는 시스템 전체에서 유일해야 함 |
| **설계 표현** | Menu.code에 @unique 제약조건 |
| **구현 위치** | menu.service.ts - create() |
| **검증 방법** | 중복 코드로 생성 시도 시 ConflictException 발생 확인 |
| **관련 테스트** | UT-006, E2E-005 |

#### BR-002: 계층 깊이 제한

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 계층 깊이는 최대 3단계까지 허용 |
| **설계 표현** | 생성 시 부모 계층 검증 로직 |
| **구현 위치** | menu.service.ts - create() |
| **검증 방법** | 4단계 메뉴 생성 시도 시 BadRequestException 발생 확인 |
| **관련 테스트** | UT-007, E2E-006 |

#### BR-003: 자식 메뉴 보호

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 자식 메뉴가 있는 경우 부모 메뉴 삭제 불가 |
| **설계 표현** | 삭제 전 자식 메뉴 존재 확인 |
| **구현 위치** | menu.service.ts - delete() |
| **검증 방법** | 자식 있는 메뉴 삭제 시도 시 BadRequestException 발생 확인 |
| **관련 테스트** | UT-008, E2E-007 |

#### BR-004: 비활성 메뉴 필터링

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 비활성화된 메뉴(isActive=false)는 API 응답에서 제외 |
| **설계 표현** | findAll()에서 isActive=true 조건 |
| **구현 위치** | menu.service.ts - findAll() |
| **검증 방법** | 비활성 메뉴가 응답에 포함되지 않음 확인 |
| **관련 테스트** | UT-009 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-002 | - | 미실행 |
| UT-003 | 단위 | FR-003 | - | 미실행 |
| UT-004 | 단위 | FR-004 | - | 미실행 |
| UT-005 | 단위 | FR-005 | - | 미실행 |
| UT-006 | 단위 | - | BR-001 | 미실행 |
| UT-007 | 단위 | - | BR-002 | 미실행 |
| UT-008 | 단위 | - | BR-003 | 미실행 |
| UT-009 | 단위 | - | BR-004 | 미실행 |
| E2E-001 | E2E | FR-001 | - | 미실행 |
| E2E-002 | E2E | FR-002 | - | 미실행 |
| E2E-003 | E2E | FR-003 | - | 미실행 |
| E2E-004 | E2E | FR-005 | - | 미실행 |
| E2E-005 | E2E | - | BR-001 | 미실행 |
| E2E-006 | E2E | - | BR-002 | 미실행 |
| E2E-007 | E2E | - | BR-003 | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 엔티티 → Prisma 모델 → API DTO 매핑

| 설계 엔티티 | Prisma 모델 | API Request DTO | API Response DTO |
|------------|-------------|-----------------|------------------|
| Menu | Menu | CreateMenuDto | MenuItem |
| - | Menu | UpdateMenuDto | MenuItem |

---

## 5. 인터페이스 추적

> 설계 인터페이스 요구사항 → API 엔드포인트 매핑

| 설계 인터페이스 | API명 | Method | Endpoint | 요구사항 |
|----------------|-------|--------|----------|----------|
| 메뉴 목록 조회 | getMenus | GET | /api/menus | FR-001, FR-002 |
| 메뉴 생성 | createMenu | POST | /api/menus | FR-001 |
| 메뉴 수정 | updateMenu | PUT | /api/menus/:id | FR-003, FR-004, FR-005 |
| 메뉴 삭제 | deleteMenu | DELETE | /api/menus/:id | - |

---

## 6. 화면 추적

> 본 Task(TSK-03-01)는 Backend domain으로 직접적인 화면 컴포넌트를 포함하지 않습니다.

| 설계 화면 | 컴포넌트 | 요구사항 | 비고 |
|----------|----------|----------|------|
| 사이드바 메뉴 | Sidebar.tsx | FR-001, FR-002 | TSK-01-03에서 구현 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 5 | 5 | 0 | 100% |
| 비즈니스 규칙 (BR) | 4 | 4 | 0 | 100% |
| 단위 테스트 (UT) | 9 | 9 | 0 | 100% |
| E2E 테스트 | 7 | 7 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 관련 문서

- 설계 문서: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`
- TRD: `.orchay/projects/mes-portal/trd.md`

---

<!--
TSK-03-01 요구사항 추적성 매트릭스
Version: 1.0
Created: 2026-01-20
-->
