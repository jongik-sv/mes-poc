# êµ¬í˜„ ë³´ê³ ì„œ (030-implementation.md)

**Template Version:** 2.0.0 â€” **Last Updated:** 2026-01-22

---

## 0. ë¬¸ì„œ ë©”íƒ€ë°ì´í„°

* **ë¬¸ì„œëª…**: `030-implementation.md`
* **Task ID**: TSK-03-04
* **Task ëª…**: ì¦ê²¨ì°¾ê¸° ë©”ë‰´
* **ì‘ì„±ì¼**: 2026-01-22
* **ì‘ì„±ì**: Claude
* **ì°¸ì¡° ì„¤ê³„ì„œ**: `./010-design.md`
* **êµ¬í˜„ ê¸°ê°„**: 2026-01-22
* **êµ¬í˜„ ìƒíƒœ**: âœ… ì™„ë£Œ

### ë¬¸ì„œ ìœ„ì¹˜
```
.orchay/projects/mes-portal/tasks/TSK-03-04/
â”œâ”€â”€ 010-design.md               â† í†µí•©ì„¤ê³„
â”œâ”€â”€ 025-traceability-matrix.md  â† ìš”êµ¬ì‚¬í•­ ì¶”ì ì„±
â”œâ”€â”€ 026-test-specification.md   â† í…ŒìŠ¤íŠ¸ ëª…ì„¸
â”œâ”€â”€ 030-implementation.md       â† êµ¬í˜„ ë³´ê³ ì„œ (ë³¸ ë¬¸ì„œ)
â”œâ”€â”€ 070-tdd-test-results.md     â† TDD í…ŒìŠ¤íŠ¸ ê²°ê³¼
â””â”€â”€ 070-e2e-test-results.md     â† E2E í…ŒìŠ¤íŠ¸ ê²°ê³¼
```

---

## 1. êµ¬í˜„ ê°œìš”

### 1.1 êµ¬í˜„ ëª©ì 
ì‚¬ìš©ìê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ë‰´ë¥¼ ì¦ê²¨ì°¾ê¸°ë¡œ ë“±ë¡í•˜ê³ , í—¤ë”ì˜ ë¹ ë¥¸ ë©”ë‰´ì—ì„œ ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ êµ¬í˜„

### 1.2 êµ¬í˜„ ë²”ìœ„
- **í¬í•¨ëœ ê¸°ëŠ¥**:
  - ì‚¬ì´ë“œë°” ë©”ë‰´ì—ì„œ ì¦ê²¨ì°¾ê¸° ì¶”ê°€/ì œê±° (ë³„ ì•„ì´ì½˜ í† ê¸€)
  - í—¤ë” ë¹ ë¥¸ ë©”ë‰´ ë“œë¡­ë‹¤ìš´ì—ì„œ ì¦ê²¨ì°¾ê¸° ëª©ë¡ í‘œì‹œ
  - ì¦ê²¨ì°¾ê¸° í´ë¦­ ì‹œ MDI íƒ­ ì—´ê¸°
  - localStorage ê¸°ë°˜ ì˜ì†ì„± (ìƒˆë¡œê³ ì¹¨ í›„ ìœ ì§€)
  - ìµœëŒ€ 20ê°œ ì œí•œ ë° ì¤‘ë³µ ë°©ì§€

- **ì œì™¸ëœ ê¸°ëŠ¥**:
  - ì„œë²„ ë™ê¸°í™” (Backend API) - MVP ë²”ìœ„ ì™¸
  - ì¦ê²¨ì°¾ê¸° ìˆœì„œ ë³€ê²½ (ë“œë˜ê·¸ ì•¤ ë“œë¡­) - í–¥í›„ êµ¬í˜„

### 1.3 êµ¬í˜„ ìœ í˜•
- [ ] Backend Only
- [x] Frontend Only
- [ ] Full-stack

### 1.4 ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**:
  - Framework: Next.js 16.x, React 19.x
  - UI: Ant Design 6.x, TailwindCSS 4.x
  - State: Custom Hook (useFavorites)
  - Storage: localStorage
  - Testing: Vitest 4.x, @testing-library/react

---

## 2. Frontend êµ¬í˜„ ê²°ê³¼

### 2.1 êµ¬í˜„ëœ ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|----------|------|------|------|
| useFavorites | `lib/hooks/useFavorites.ts` | ì¦ê²¨ì°¾ê¸° ìƒíƒœ ê´€ë¦¬ í›… | âœ… |
| FavoriteButton | `components/common/FavoriteButton.tsx` | ì¦ê²¨ì°¾ê¸° í† ê¸€ ë²„íŠ¼ | âœ… |
| QuickMenu | `components/common/QuickMenu.tsx` | ë¹ ë¥¸ ë©”ë‰´ ë“œë¡­ë‹¤ìš´ | âœ… |
| FavoriteMenuItem | `lib/types/favorites.ts` | íƒ€ì… ì •ì˜ | âœ… |

### 2.2 ì»´í¬ë„ŒíŠ¸ ìƒì„¸

#### 2.2.1 useFavorites í›…
- **íŒŒì¼**: `lib/hooks/useFavorites.ts`
- **ì£¼ìš” ê¸°ëŠ¥**:
  - `favoriteIds`: ì¦ê²¨ì°¾ê¸° ë©”ë‰´ ID ë°°ì—´
  - `favoriteMenus`: ì¦ê²¨ì°¾ê¸° ë©”ë‰´ ê°ì²´ ë°°ì—´ (ë©”ë‰´ ì •ë³´ í¬í•¨)
  - `isFavorite(menuId)`: ì¦ê²¨ì°¾ê¸° ì—¬ë¶€ í™•ì¸
  - `canAddFavorite()`: ì¶”ê°€ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸ (ìµœëŒ€ 20ê°œ)
  - `addFavorite(menuId)`: ì¦ê²¨ì°¾ê¸° ì¶”ê°€
  - `removeFavorite(menuId)`: ì¦ê²¨ì°¾ê¸° ì œê±°
  - `toggleFavorite(menuId)`: ì¦ê²¨ì°¾ê¸° í† ê¸€

#### 2.2.2 FavoriteButton ì»´í¬ë„ŒíŠ¸
- **íŒŒì¼**: `components/common/FavoriteButton.tsx`
- **Props**:
  - `isFavorite: boolean` - ì¦ê²¨ì°¾ê¸° ì—¬ë¶€
  - `onToggle: () => void` - í† ê¸€ ì½œë°±
  - `disabled?: boolean` - ë¹„í™œì„±í™” ì—¬ë¶€
  - `showTooltip?: boolean` - íˆ´íŒ í‘œì‹œ ì—¬ë¶€
- **data-testid**: `favorite-toggle-btn`

#### 2.2.3 QuickMenu ì»´í¬ë„ŒíŠ¸
- **íŒŒì¼**: `components/common/QuickMenu.tsx`
- **Props**:
  - `favoriteMenus: FavoriteMenuItem[]` - ì¦ê²¨ì°¾ê¸° ë©”ë‰´ ëª©ë¡
  - `onMenuClick: (menu) => void` - ë©”ë‰´ í´ë¦­ ì½œë°±
  - `isLoading?: boolean` - ë¡œë”© ìƒíƒœ
- **data-testid**: `quick-menu-btn`, `quick-menu-dropdown`, `quick-menu-empty`

### 2.3 Sidebar í†µí•©
- **íŒŒì¼**: `components/layout/Sidebar.tsx`
- **ë³€ê²½ ì‚¬í•­**:
  - `FavoriteOptions` ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
  - ë¦¬í”„ ë©”ë‰´(í™”ë©´ ë©”ë‰´)ì— FavoriteButton í†µí•©
  - í˜¸ë²„ ì‹œ ë³„ ì•„ì´ì½˜ í‘œì‹œ (group-hover ìŠ¤íƒ€ì¼)

### 2.4 Header í†µí•©
- **íŒŒì¼**: `components/layout/Header.tsx`
- **ë³€ê²½ ì‚¬í•­**:
  - QuickMenu ì»´í¬ë„ŒíŠ¸ í†µí•©
  - `favoriteMenus`, `onFavoriteMenuClick` props ì¶”ê°€
  - ë¡œê³  ì˜†ì— ë¹ ë¥¸ ë©”ë‰´ ë²„íŠ¼ ë°°ì¹˜

---

## 3. TDD í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 3.1 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
```
File                         | % Stmts | % Branch | % Funcs | % Lines |
-----------------------------|---------|----------|---------|---------|
useFavorites.ts              |   91.56 |    66.66 |   95.83 |   91.02 |
FavoriteButton.tsx           |   85.71 |    88.88 |   100   |   85.71 |
QuickMenu.tsx                |   88.88 |    66.66 |   80    |   88.88 |
favorites.ts (types)         |   100   |    100   |   100   |   100   |
-----------------------------|---------|----------|---------|---------|
ì „ì²´                         |   89.81 |    69.56 |   93.75 |   89.32 |
```

**í’ˆì§ˆ ê¸°ì¤€ ë‹¬ì„± ì—¬ë¶€**:
- âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ: 89.32%
- âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼: 34/34 í†µê³¼
- âœ… Functions ì»¤ë²„ë¦¬ì§€ 85% ì´ìƒ: 93.75%

### 3.2 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘

| í…ŒìŠ¤íŠ¸ ID | ì„¤ê³„ ì‹œë‚˜ë¦¬ì˜¤ | ê²°ê³¼ | ë¹„ê³  |
|-----------|--------------|------|------|
| UT-001 | ì¦ê²¨ì°¾ê¸° ì¶”ê°€ (ì •ìƒ) | âœ… Pass | FR-001 |
| UT-002 | ìµœëŒ€ ê°œìˆ˜ ì œí•œ ì´ˆê³¼ | âœ… Pass | BR-001 |
| UT-003 | ì¦ê²¨ì°¾ê¸° ì œê±° | âœ… Pass | FR-002 |
| UT-004 | ì¦ê²¨ì°¾ê¸° ëª©ë¡ ì¡°íšŒ (ìˆœì„œ ìœ ì§€) | âœ… Pass | FR-003, BR-003 |
| UT-005 | ì¦ê²¨ì°¾ê¸° ì—¬ë¶€ í™•ì¸ | âœ… Pass | FR-001, FR-002 |
| UT-006 | localStorageì—ì„œ ì´ˆê¸°í™” | âœ… Pass | FR-004 |

### 3.3 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼
```
âœ“ lib/hooks/__tests__/useFavorites.test.ts (18 tests) 584ms
âœ“ components/common/__tests__/FavoriteButton.test.tsx (8 tests) 1014ms
âœ“ components/common/__tests__/QuickMenu.test.tsx (8 tests) 1669ms

Test Files  3 passed (3)
Tests       34 passed (34)
Duration    5.86s
```

---

## 4. ìš”êµ¬ì‚¬í•­ ì»¤ë²„ë¦¬ì§€

### 4.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ ì»¤ë²„ë¦¬ì§€

| ìš”êµ¬ì‚¬í•­ ID | ìš”êµ¬ì‚¬í•­ ì„¤ëª… | í…ŒìŠ¤íŠ¸ ID | ê²°ê³¼ |
|-------------|--------------|-----------|------|
| FR-001 | ì¦ê²¨ì°¾ê¸° ì¶”ê°€ | UT-001, UT-002 | âœ… |
| FR-002 | ì¦ê²¨ì°¾ê¸° ì œê±° | UT-003, UT-004 | âœ… |
| FR-003 | ë¹ ë¥¸ ë©”ë‰´ í‘œì‹œ | UT-004, QuickMenu tests | âœ… |
| FR-004 | ì˜ì†ì„± (localStorage) | UT-006 | âœ… |

### 4.2 ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ì»¤ë²„ë¦¬ì§€

| ê·œì¹™ ID | ê·œì¹™ ì„¤ëª… | í…ŒìŠ¤íŠ¸ ID | ê²°ê³¼ |
|---------|----------|-----------|------|
| BR-001 | ìµœëŒ€ 20ê°œ ì œí•œ | UT-002, canAddFavorite tests | âœ… |
| BR-002 | ì¤‘ë³µ ë°©ì§€ | addFavorite ì¤‘ë³µ í…ŒìŠ¤íŠ¸ | âœ… |
| BR-003 | ìˆœì„œ ìœ ì§€ (ì¶”ê°€ ìˆœì„œ) | favoriteMenus ìˆœì„œ í…ŒìŠ¤íŠ¸ | âœ… |

---

## 5. ì£¼ìš” ê¸°ìˆ ì  ê²°ì •ì‚¬í•­

### 5.1 ì•„í‚¤í…ì²˜ ê²°ì •

1. **localStorage ê¸°ë°˜ ì €ì¥**
   - ë°°ê²½: MVP ë²”ìœ„ì—ì„œ ë°±ì—”ë“œ API ì—†ì´ ì¦ê²¨ì°¾ê¸° ì˜ì†ì„± í•„ìš”
   - ì„ íƒ: localStorage + storage ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
   - ëŒ€ì•ˆ: sessionStorage, IndexedDB
   - ê·¼ê±°: ê°„ë‹¨í•œ ë°ì´í„° êµ¬ì¡°, ë‹¤ì¤‘ íƒ­ ë™ê¸°í™” ìš©ì´

2. **Custom Hook íŒ¨í„´ (useFavorites)**
   - ë°°ê²½: ì¦ê²¨ì°¾ê¸° ìƒíƒœë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µìœ 
   - ì„ íƒ: Custom Hook + localStorage
   - ëŒ€ì•ˆ: Zustand, Redux, Context API
   - ê·¼ê±°: ê°„ë‹¨í•œ ìƒíƒœ, ì¶”ê°€ ì˜ì¡´ì„± ìµœì†Œí™”, ì¬ì‚¬ìš©ì„±

### 5.2 êµ¬í˜„ íŒ¨í„´

- **ë””ìì¸ íŒ¨í„´**: Custom Hook íŒ¨í„´, Compound Components
- **ì½”ë“œ ì»¨ë²¤ì…˜**: Ant Design + TailwindCSS í˜¼í•© ì‚¬ìš© (TRD ê¸°ì¤€)
- **ì—ëŸ¬ í•¸ë“¤ë§**: localStorage QuotaExceeded ì—ëŸ¬ ì²˜ë¦¬, JSON íŒŒì‹± ì—ëŸ¬ ë³µêµ¬

---

## 6. ì•Œë ¤ì§„ ì´ìŠˆ ë° ì œì•½ì‚¬í•­

### 6.1 ì•Œë ¤ì§„ ì´ìŠˆ

| ì´ìŠˆ ID | ì´ìŠˆ ë‚´ìš© | ì‹¬ê°ë„ | í•´ê²° ê³„íš |
|---------|----------|--------|----------|
| ISS-001 | Branch ì»¤ë²„ë¦¬ì§€ 69.56% (ëª©í‘œ 75% ë¯¸ë§Œ) | ğŸŸ¢ Low | localStorage ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ì¶”ê°€ í…ŒìŠ¤íŠ¸ |
| ISS-002 | ë¹„ê³µê°œ ë¸Œë¼ìš°ì§• ëª¨ë“œì—ì„œ localStorage ì œí•œ | ğŸŸ¢ Low | ì„¸ì…˜ ë™ì•ˆ ë©”ëª¨ë¦¬ ìœ ì§€ë¡œ í´ë°± êµ¬í˜„ë¨ |

### 6.2 ê¸°ìˆ ì  ì œì•½ì‚¬í•­
- ìµœëŒ€ ì¦ê²¨ì°¾ê¸° ê°œìˆ˜: 20ê°œ (FAVORITES_CONFIG.MAX_FAVORITES)
- ì„œë²„ ë™ê¸°í™” ì—†ìŒ (ë¸Œë¼ìš°ì € ë¡œì»¬ ì €ì¥)
- ë‹¤ë¥¸ ë””ë°”ì´ìŠ¤ ê°„ ë™ê¸°í™” ë¶ˆê°€

### 6.3 í–¥í›„ ê°œì„  í•„ìš” ì‚¬í•­
- ë°±ì—”ë“œ API ì—°ë™ ì‹œ ì„œë²„ ë™ê¸°í™” ê¸°ëŠ¥ ì¶”ê°€
- ì¦ê²¨ì°¾ê¸° ìˆœì„œ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥
- ì¦ê²¨ì°¾ê¸° í´ë”/ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ê¸°ëŠ¥

---

## 7. êµ¬í˜„ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 7.1 Frontend ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x] useFavorites í›… êµ¬í˜„ ì™„ë£Œ
- [x] FavoriteButton ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì™„ë£Œ
- [x] QuickMenu ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì™„ë£Œ
- [x] Sidebar í†µí•© ì™„ë£Œ
- [x] Header í†µí•© ì™„ë£Œ
- [x] TDD í…ŒìŠ¤íŠ¸ ì‘ì„± ë° í†µê³¼ (ì»¤ë²„ë¦¬ì§€ 89.32%)
- [x] data-testid ì ìš© ì™„ë£Œ
- [x] ì ‘ê·¼ì„±(aria-label) ì ìš© ì™„ë£Œ

### 7.2 í†µí•© ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x] ì„¤ê³„ì„œ ìš”êµ¬ì‚¬í•­ ì¶©ì¡± í™•ì¸
- [x] ìš”êµ¬ì‚¬í•­ ì»¤ë²„ë¦¬ì§€ 100% ë‹¬ì„± (FR/BR â†’ í…ŒìŠ¤íŠ¸ ID)
- [x] ë¬¸ì„œí™” ì™„ë£Œ (êµ¬í˜„ ë³´ê³ ì„œ, í…ŒìŠ¤íŠ¸ ê²°ê³¼ì„œ)
- [x] ì•Œë ¤ì§„ ì´ìŠˆ ë¬¸ì„œí™” ì™„ë£Œ
- [ ] WBS ìƒíƒœ ì—…ë°ì´íŠ¸ (`[im]` êµ¬í˜„)

---

## 8. ì°¸ê³  ìë£Œ

### 8.1 ê´€ë ¨ ë¬¸ì„œ
- ì„¤ê³„ì„œ: `./010-design.md`
- ì¶”ì ì„± ë§¤íŠ¸ë¦­ìŠ¤: `./025-traceability-matrix.md`
- í…ŒìŠ¤íŠ¸ ëª…ì„¸: `./026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`
- TRD: `.orchay/projects/mes-portal/trd.md`

### 8.2 í…ŒìŠ¤íŠ¸ ê²°ê³¼ íŒŒì¼
- TDD í…ŒìŠ¤íŠ¸ ê²°ê³¼: `./070-tdd-test-results.md`
- E2E í…ŒìŠ¤íŠ¸ ê²°ê³¼: `./070-e2e-test-results.md`
- ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸: `test-results/20260122-131204/tdd/coverage/`

### 8.3 ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜
- Hook: `mes-portal/lib/hooks/useFavorites.ts`
- Types: `mes-portal/lib/types/favorites.ts`
- Components: `mes-portal/components/common/FavoriteButton.tsx`, `QuickMenu.tsx`
- Layout: `mes-portal/components/layout/Sidebar.tsx`, `Header.tsx`
- Tests: `mes-portal/lib/hooks/__tests__/`, `mes-portal/components/common/__tests__/`

---

## 9. ë‹¤ìŒ ë‹¨ê³„

### 9.1 ì½”ë“œ ë¦¬ë·° (ì„ íƒ)
- `/wf:audit TSK-03-04` - LLM ì½”ë“œ ë¦¬ë·° ì‹¤í–‰
- `/wf:patch TSK-03-04` - ë¦¬ë·° ë‚´ìš© ë°˜ì˜

### 9.2 ë‹¤ìŒ ì›Œí¬í”Œë¡œìš°
- `/wf:verify TSK-03-04` - í†µí•©í…ŒìŠ¤íŠ¸ ì‹œì‘

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 1.0.0 | 2026-01-22 | Claude | ìµœì´ˆ ì‘ì„± |
