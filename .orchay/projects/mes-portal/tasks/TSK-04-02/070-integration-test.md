# í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼ì„œ (070-integration-test.md)

**Template Version:** 1.0.0 â€” **Last Updated:** 2026-01-21

> **ëª©ì **: TSK-04-02 (ì‚¬ìš©ì ë° ì—­í•  ëª¨ë¸) í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¬¸ì„œí™”

---

## 0. ë¬¸ì„œ ë©”íƒ€ë°ì´í„°

| í•­ëª© | ë‚´ìš© |
|------|------|
| Task ID | TSK-04-02 |
| Taskëª… | ì‚¬ìš©ì ë° ì—­í•  ëª¨ë¸ |
| Category | development |
| ìƒíƒœ ì „í™˜ | `[im]` êµ¬í˜„ â†’ `[vf]` ê²€ì¦ |
| í…ŒìŠ¤íŠ¸ ì¼ì | 2026-01-21 |
| í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ì | Claude |

---

## 1. í…ŒìŠ¤íŠ¸ ê°œìš”

### 1.1 í…ŒìŠ¤íŠ¸ ë²”ìœ„

| ì˜ì—­ | ì„¤ëª… | í¬í•¨ ì—¬ë¶€ |
|------|------|----------|
| ë°ì´í„°ë² ì´ìŠ¤ | Prisma ìŠ¤í‚¤ë§ˆ, SQLite | âœ… |
| ëª¨ë¸ | User, Role ëª¨ë¸ CRUD | âœ… |
| ê´€ê³„ | User-Role N:1 ê´€ê³„ | âœ… |
| ì‹œë“œ | ì—­í•  ë° ì‚¬ìš©ì ì´ˆê¸° ë°ì´í„° | âœ… |
| ë¹„ë°€ë²ˆí˜¸ | bcrypt í•´ì‹œ ìœ í‹¸ë¦¬í‹° | âœ… |
| API | REST API ì—”ë“œí¬ì¸íŠ¸ | âŒ (TSK-04-03ì—ì„œ ìˆ˜í–‰) |
| UI | í”„ë¡ íŠ¸ì—”ë“œ í™”ë©´ | âŒ (TSK-04-04ì—ì„œ ìˆ˜í–‰) |

### 1.2 í…ŒìŠ¤íŠ¸ í™˜ê²½

| í•­ëª© | ë‚´ìš© |
|------|------|
| í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ | Vitest 4.x |
| ë°ì´í„°ë² ì´ìŠ¤ | SQLite (file:./dev.db) |
| ORM | Prisma 7.x + @prisma/adapter-better-sqlite3 |
| ë¹„ë°€ë²ˆí˜¸ í•´ì‹± | bcrypt 6.x |
| Node.js | 22.x |

---

## 2. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 2.1 í…ŒìŠ¤íŠ¸ íŒŒì¼ë³„ ê²°ê³¼

| íŒŒì¼ | í…ŒìŠ¤íŠ¸ ìˆ˜ | í†µê³¼ | ì‹¤íŒ¨ | ì‹œê°„ |
|------|----------|------|------|------|
| `prisma/__tests__/role.model.test.ts` | 3 | 3 | 0 | 353ms |
| `prisma/__tests__/user.model.test.ts` | 5 | 5 | 0 | 739ms |
| `prisma/__tests__/seed.test.ts` | 5 | 5 | 0 | 375ms |
| `lib/auth/__tests__/password.test.ts` | 5 | 5 | 0 | 608ms |
| **í•©ê³„** | **18** | **18** | **0** | **2.07s** |

### 2.2 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„¸

#### Role ëª¨ë¸ í…ŒìŠ¤íŠ¸ (3/3 í†µê³¼)

| í…ŒìŠ¤íŠ¸ ID | ì‹œë‚˜ë¦¬ì˜¤ | ê²°ê³¼ |
|-----------|----------|------|
| UT-003 | Role ì •ìƒ ìƒì„± | âœ… PASS |
| UT-004 | ì—­í•  ì½”ë“œ ì¤‘ë³µ ì‹œ ì—ëŸ¬ (P2002) | âœ… PASS |
| UT-011 | ì—­í• ë³„ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ | âœ… PASS |

#### User ëª¨ë¸ í…ŒìŠ¤íŠ¸ (5/5 í†µê³¼)

| í…ŒìŠ¤íŠ¸ ID | ì‹œë‚˜ë¦¬ì˜¤ | ê²°ê³¼ |
|-----------|----------|------|
| UT-001 | User ì •ìƒ ìƒì„± | âœ… PASS |
| UT-002 | ì´ë©”ì¼ ì¤‘ë³µ ì‹œ ì—ëŸ¬ (P2002) | âœ… PASS |
| UT-005 | User-Role ê´€ê³„ ì¡°íšŒ | âœ… PASS |
| UT-009 | ë¹„í™œì„± ì‚¬ìš©ì ì¡°íšŒ | âœ… PASS |
| UT-010 | ìˆ˜ì • ì‹œ updatedAt ê°±ì‹  | âœ… PASS |

#### ì‹œë“œ ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ (5/5 í†µê³¼)

| í…ŒìŠ¤íŠ¸ ID | ì‹œë‚˜ë¦¬ì˜¤ | ê²°ê³¼ |
|-----------|----------|------|
| IT-001 | ì—­í•  ì‹œë“œ ìƒì„± (ADMIN, MANAGER, OPERATOR) | âœ… PASS |
| IT-002 | ê´€ë¦¬ì ê³„ì • ì‹œë“œ ìƒì„± | âœ… PASS |
| IT-003 | ì‹œë“œ ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ í™•ì¸ | âœ… PASS |
| IT-004 | ì¤‘ë³µ ì‹¤í–‰ ì‹œ ì•ˆì „ì„± (upsert) | âœ… PASS |
| IT-005 | í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì—­í•  ë§¤í•‘ | âœ… PASS |

#### ë¹„ë°€ë²ˆí˜¸ ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸ (5/5 í†µê³¼)

| í…ŒìŠ¤íŠ¸ ID | ì‹œë‚˜ë¦¬ì˜¤ | ê²°ê³¼ |
|-----------|----------|------|
| UT-006 | bcrypt í•´ì‹œ ìƒì„± | âœ… PASS |
| UT-007 | í•´ì‹œ ê²€ì¦ ì„±ê³µ | âœ… PASS |
| UT-008 | í•´ì‹œ ê²€ì¦ ì‹¤íŒ¨ | âœ… PASS |
| - | í•´ì‹œ ê¸¸ì´ 60ì ê²€ì¦ | âœ… PASS |
| - | í•´ì‹œ í˜•ì‹ ($2b$) ê²€ì¦ | âœ… PASS |

---

## 3. í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 3.1 ì‹œë“œ ë°ì´í„° í†µí•© ê²€ì¦

```
ğŸ” TSK-04-02 í†µí•© í…ŒìŠ¤íŠ¸: ì‚¬ìš©ì ë° ì—­í•  ëª¨ë¸ ê²€ì¦

============================================================

[IT-001] ì—­í•  ì‹œë“œ ë°ì´í„° ê²€ì¦
  âœ… ADMIN: ì‹œìŠ¤í…œ ê´€ë¦¬ì
  âœ… MANAGER: ìƒì‚° ê´€ë¦¬ì
  âœ… OPERATOR: í˜„ì¥ ì‘ì—…ì
  ê²°ê³¼: âœ… PASS

[IT-002] ì‚¬ìš©ì ì‹œë“œ ë°ì´í„° ê²€ì¦
  âœ… admin@example.com (ADMIN): ê´€ë¦¬ì
  âœ… manager@example.com (MANAGER): ìƒì‚°ê´€ë¦¬ì
  âœ… operator@example.com (OPERATOR): ì‘ì—…ì
  ê²°ê³¼: âœ… PASS

[IT-003] ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ê²€ì¦
  âœ… admin@example.com: bcrypt í•´ì‹œ (ê²€ì¦ ì„±ê³µ)
  âœ… manager@example.com: bcrypt í•´ì‹œ (ê²€ì¦ ì„±ê³µ)
  âœ… operator@example.com: bcrypt í•´ì‹œ (ê²€ì¦ ì„±ê³µ)
  ê²°ê³¼: âœ… PASS

[IT-004] User-Role ê´€ê³„ ì¡°íšŒ ê²€ì¦
  âœ… admin@example.com â†’ ADMIN
  âœ… manager@example.com â†’ MANAGER
  âœ… operator@example.com â†’ OPERATOR
  ê²°ê³¼: âœ… PASS

[IT-005] ì—­í• ë³„ ì‚¬ìš©ì ì¡°íšŒ ê²€ì¦
  âœ… ADMIN: 1ëª… (admin@example.com)
  âœ… MANAGER: 1ëª… (manager@example.com)
  âœ… OPERATOR: 1ëª… (operator@example.com)
  ê²°ê³¼: âœ… PASS

============================================================
ğŸ‰ í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼: ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (5/5)
============================================================
```

### 3.2 ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦

| ê²€ì¦ í•­ëª© | ì˜ˆìƒ ê²°ê³¼ | ì‹¤ì œ ê²°ê³¼ | ìƒíƒœ |
|----------|----------|----------|------|
| ì—­í•  í…Œì´ë¸” ë ˆì½”ë“œ ìˆ˜ | 3ê°œ | 3ê°œ | âœ… |
| ì‚¬ìš©ì í…Œì´ë¸” ë ˆì½”ë“œ ìˆ˜ | 3ê°œ | 3ê°œ | âœ… |
| ADMIN ì—­í•  ì¡´ì¬ | ìˆìŒ | ìˆìŒ | âœ… |
| MANAGER ì—­í•  ì¡´ì¬ | ìˆìŒ | ìˆìŒ | âœ… |
| OPERATOR ì—­í•  ì¡´ì¬ | ìˆìŒ | ìˆìŒ | âœ… |
| ê´€ë¦¬ì ì´ë©”ì¼ | admin@example.com | admin@example.com | âœ… |
| ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ í˜•ì‹ | $2b$ ì ‘ë‘ì‚¬ | $2b$ ì ‘ë‘ì‚¬ | âœ… |
| User-Role FK ê´€ê³„ | ì •ìƒ | ì •ìƒ | âœ… |

---

## 4. ìš”êµ¬ì‚¬í•­ ì»¤ë²„ë¦¬ì§€

### 4.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (FR)

| ìš”êµ¬ì‚¬í•­ ID | ì„¤ëª… | í…ŒìŠ¤íŠ¸ ID | ê²°ê³¼ |
|------------|------|----------|------|
| FR-001 | User ëª¨ë¸ ì •ì˜ | UT-001 | âœ… |
| FR-002 | Role ëª¨ë¸ ì •ì˜ | UT-003 | âœ… |
| FR-003 | User-Role ê´€ê³„ ì„¤ì • | UT-005, IT-004 | âœ… |
| FR-004 | ë¹„í™œì„± ì‚¬ìš©ì ì²˜ë¦¬ | UT-009 | âœ… |
| FR-005 | updatedAt ìë™ ê°±ì‹  | UT-010 | âœ… |
| FR-006 | ì—­í• ë³„ ì‚¬ìš©ì ì¡°íšŒ | UT-011, IT-005 | âœ… |
| FR-007 | ì—­í•  ì‹œë“œ ë°ì´í„° | IT-001 | âœ… |
| FR-008 | ì‚¬ìš©ì ì‹œë“œ ë°ì´í„° | IT-002 | âœ… |
| FR-009 | ì‚¬ìš©ì-ì—­í•  ë§¤í•‘ | IT-005 | âœ… |

**ì»¤ë²„ë¦¬ì§€: 9/9 (100%)**

### 4.2 ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ (BR)

| ê·œì¹™ ID | ì„¤ëª… | í…ŒìŠ¤íŠ¸ ID | ê²°ê³¼ |
|---------|------|----------|------|
| BR-001 | ì´ë©”ì¼ ìœ ë‹ˆí¬ ì œì•½ | UT-002 | âœ… |
| BR-002 | ì—­í•  ì½”ë“œ ìœ ë‹ˆí¬ ì œì•½ | UT-004 | âœ… |
| BR-003 | bcrypt í•´ì‹œ ì €ì¥ | UT-006, UT-007, UT-008, IT-003 | âœ… |
| BR-004 | ì‹œë“œ ë©±ë“±ì„± | IT-004 | âœ… |

**ì»¤ë²„ë¦¬ì§€: 4/4 (100%)**

---

## 5. í…ŒìŠ¤íŠ¸ ìš”ì•½

### 5.1 í…ŒìŠ¤íŠ¸ í†µê³„

| êµ¬ë¶„ | ìˆ˜ëŸ‰ | í†µê³¼ | ì‹¤íŒ¨ | í†µê³¼ìœ¨ |
|------|------|------|------|--------|
| ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | 18 | 18 | 0 | 100% |
| í†µí•© í…ŒìŠ¤íŠ¸ | 5 | 5 | 0 | 100% |
| **ì´ê³„** | **23** | **23** | **0** | **100%** |

### 5.2 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

| íŒŒì¼ | Statements | Branches | Functions | Lines |
|------|------------|----------|-----------|-------|
| lib/auth/password.ts | 100% | 100% | 100% | 100% |
| prisma/seed.ts | 90% | 90% | 100% | 90% |
| **í‰ê· ** | **95%** | **95%** | **100%** | **95%** |

### 5.3 ë°œê²¬ëœ ì´ìŠˆ

> ë°œê²¬ëœ ì´ìŠˆ ì—†ìŒ

---

## 6. í…ŒìŠ¤íŠ¸ ê²°ë¡ 

### 6.1 íŒì •

**âœ… PASS** - ëª¨ë“  í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼

### 6.2 ê·¼ê±°

1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: 18/18 í†µê³¼ (100%)
2. **í†µí•© í…ŒìŠ¤íŠ¸**: 5/5 í†µê³¼ (100%)
3. **ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ ì»¤ë²„ë¦¬ì§€**: 9/9 (100%)
4. **ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ì»¤ë²„ë¦¬ì§€**: 4/4 (100%)
5. **ì½”ë“œ ì»¤ë²„ë¦¬ì§€**: 95% (ëª©í‘œ 80% ì´ìƒ ë‹¬ì„±)

### 6.3 ë‹¤ìŒ ë‹¨ê³„

- ìƒíƒœ ì „í™˜: `[im]` â†’ `[vf]`
- í›„ì† ì‘ì—…:
  - TSK-04-03: Auth.js ì¸ì¦ ì„¤ì • (ì˜ì¡´)
  - TSK-04-04: ë¡œê·¸ì¸ í˜ì´ì§€ (ì˜ì¡´)
  - TSK-03-02: ì—­í• -ë©”ë‰´ ë§¤í•‘ (ì˜ì¡´)

---

## 7. í…ŒìŠ¤íŠ¸ ì•„í‹°íŒ©íŠ¸

### 7.1 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `scripts/verify-seed.ts` | ì‹œë“œ ë°ì´í„° í†µí•© ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ |
| `prisma/__tests__/user.model.test.ts` | User ëª¨ë¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |
| `prisma/__tests__/role.model.test.ts` | Role ëª¨ë¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |
| `prisma/__tests__/seed.test.ts` | ì‹œë“œ ìŠ¤í¬ë¦½íŠ¸ í†µí•© í…ŒìŠ¤íŠ¸ |
| `lib/auth/__tests__/password.test.ts` | ë¹„ë°€ë²ˆí˜¸ ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸ |

### 7.2 ì‹¤í–‰ ëª…ë ¹

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:run -- prisma/__tests__/
npm run test:run -- lib/auth/__tests__/password.test.ts

# í†µí•© ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
npx tsx scripts/verify-seed.ts

# ì‹œë“œ ë°ì´í„° ì¬ìƒì„±
npx prisma db seed
```

---

## ê´€ë ¨ ë¬¸ì„œ

- ì„¤ê³„ ë¬¸ì„œ: `010-design.md`
- í…ŒìŠ¤íŠ¸ ëª…ì„¸: `026-test-specification.md`
- ì¶”ì ì„± ë§¤íŠ¸ë¦­ìŠ¤: `025-traceability-matrix.md`
- êµ¬í˜„ ë³´ê³ ì„œ: `030-implementation.md`
- TDD í…ŒìŠ¤íŠ¸ ê²°ê³¼: `070-tdd-test-results.md`

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ì¼ì | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 1.0 | 2026-01-21 | Claude | ìµœì´ˆ ì‘ì„± |
