# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0

> **목적**: PRD -> 기본설계 -> 상세설계 -> 테스트 4단계 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-04-04 |
| Task명 | 로그인 페이지 |
| 설계 문서 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-20 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR -> 설계 -> 테스트)

> PRD -> 기본설계 -> 상세설계 -> 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 문서 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------------|-------------|------------|-----------|------|
| FR-001 | 4.1.4 | 5.2, 7 | UT-001, UT-002 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.1.1 (폼 검증) | 6.2, 7.3 | UT-003, UT-004 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 4.1.1 (에러 상태) | 9 | UT-005, UT-006 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 4.1.4 | 3.2 (UC-01), 5.1 | UT-007 | E2E-004 | TC-004 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 로그인 폼 (이메일, 비밀번호 입력)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.4 | 로그인/로그아웃 기능 |
| 설계 | 010-design.md | 5.2 | 로그인 페이지 화면 설계 (이메일, 비밀번호 필드) |
| 설계 | 010-design.md | 7 | 데이터 요구사항 (이메일, 비밀번호 데이터) |
| 단위 테스트 | 026-test-specification.md | - | UT-001: 폼 렌더링, UT-002: 입력값 변경 |
| E2E 테스트 | 026-test-specification.md | - | E2E-001: 로그인 폼 표시 |

#### FR-002: 유효성 검사 (필수 필드, 이메일 형식)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 (폼 검증) | 필수 필드 표시, 실시간 유효성 검사 |
| 설계 | 010-design.md | 6.2 | 상태별 화면 변화 (유효성 에러 상태) |
| 설계 | 010-design.md | 7.3 | 데이터 유효성 규칙 |
| 단위 테스트 | 026-test-specification.md | - | UT-003: 이메일 유효성, UT-004: 필수 필드 검사 |
| E2E 테스트 | 026-test-specification.md | - | E2E-002: 빈 필드 제출 시 에러 |

#### FR-003: 로그인 에러 메시지 표시

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 (에러 상태) | 에러 메시지 표시 |
| 설계 | 010-design.md | 9 | 에러 처리 (예상 에러 상황, 에러 표시 방식) |
| 단위 테스트 | 026-test-specification.md | - | UT-005: 인증 실패 에러, UT-006: 네트워크 에러 |
| E2E 테스트 | 026-test-specification.md | - | E2E-003: 잘못된 자격 증명 시 에러 |

#### FR-004: 로그인 성공 시 포털로 리다이렉트

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.4 | 로그인 후 시스템 접근 |
| 설계 | 010-design.md | 3.2 (UC-01) | 유즈케이스: 인증 성공 시 /portal로 리다이렉트 |
| 설계 | 010-design.md | 5.1 | 화면 흐름도 (로그인 -> 포털) |
| 단위 테스트 | 026-test-specification.md | - | UT-007: 리다이렉트 호출 검증 |
| E2E 테스트 | 026-test-specification.md | - | E2E-004: 로그인 성공 시 /portal 이동 |

---

## 2. 비즈니스 규칙 추적 (BR -> 구현 -> 검증)

| 규칙 ID | PRD 출처 | 설계 문서 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------------|-----------------|-------------|------------|-----------|------|
| BR-001 | 4.1.1 (폼 검증) | 8.1 | LoginForm 컴포넌트 | UT-004 | E2E-002 | 빈 필드 제출 시 에러 확인 | 설계완료 |
| BR-002 | 4.1.1 (폼 검증) | 7.3 | Form Validation | UT-003 | E2E-002 | 잘못된 이메일 형식 에러 확인 | 설계완료 |
| BR-003 | 5.2 (보안) | 8.2 | Auth 에러 핸들링 | UT-005 | E2E-003 | 일반적 에러 메시지 표시 확인 | 설계완료 |
| BR-004 | 5.2 (보안) | 7.2 | Auth.js signIn | UT-007 | E2E-004 | JWT 토큰 발급 및 세션 설정 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 이메일과 비밀번호는 필수 입력

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 4.1.1 폼 검증 - 필수 필드 표시 (별표 * 또는 레이블) |
| **설계 표현** | 8.1 핵심 규칙 - "이메일과 비밀번호 모두 필수 입력" |
| **구현 위치** | LoginForm 컴포넌트 Form.Item rules |
| **검증 방법** | 빈 이메일 또는 비밀번호로 제출 시 에러 메시지 표시 확인 |
| **관련 테스트** | UT-004, E2E-002 |

#### BR-002: 이메일은 유효한 형식이어야 함

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 4.1.1 폼 검증 - 검증 규칙 (필수, 이메일, 전화번호, 숫자 범위, 정규식 등) |
| **설계 표현** | 7.3 데이터 유효성 규칙 - "이메일: 필수, 이메일 형식" |
| **구현 위치** | LoginForm 이메일 필드 validation |
| **검증 방법** | 잘못된 이메일 형식 입력 시 "올바른 이메일 형식이 아닙니다" 메시지 확인 |
| **관련 테스트** | UT-003, E2E-002 |

#### BR-003: 인증 실패 시 보안을 위해 구체적인 에러 원인 비공개

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 5.2 보안 - JWT 기반 인증, 역할 기반 접근 제어 |
| **설계 표현** | 8.2 규칙 상세 설명 - "이메일이 존재하지 않음" 또는 "비밀번호가 틀림"을 구분하지 않음 |
| **구현 위치** | Auth 에러 핸들링 (에러 메시지 표준화) |
| **검증 방법** | 인증 실패 시 일괄적으로 "이메일 또는 비밀번호가 올바르지 않습니다" 메시지 확인 |
| **관련 테스트** | UT-005, E2E-003 |

#### BR-004: 로그인 성공 시 JWT 토큰 발급 및 세션 설정

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 5.2 보안 - JWT 기반 인증 |
| **설계 표현** | 7.2 데이터 흐름 - Auth.js signIn 호출 후 세션 설정 |
| **구현 위치** | Auth.js signIn (credentials provider) |
| **검증 방법** | 로그인 성공 후 세션에 사용자 정보 저장, /portal 리다이렉트 확인 |
| **관련 테스트** | UT-007, E2E-004 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 -> 요구사항 역추적용 (build/verify 단계 결과서 생성 시 활용)

| 테스트 ID | 테스트 유형 | 테스트명 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|----------|-------------------|----------------------|------|
| UT-001 | 단위 | 로그인 폼 렌더링 | FR-001 | - | 미실행 |
| UT-002 | 단위 | 입력값 변경 처리 | FR-001 | - | 미실행 |
| UT-003 | 단위 | 이메일 형식 유효성 검사 | FR-002 | BR-002 | 미실행 |
| UT-004 | 단위 | 필수 필드 유효성 검사 | FR-002 | BR-001 | 미실행 |
| UT-005 | 단위 | 인증 실패 에러 메시지 | FR-003 | BR-003 | 미실행 |
| UT-006 | 단위 | 네트워크 에러 처리 | FR-003 | - | 미실행 |
| UT-007 | 단위 | 로그인 성공 리다이렉트 | FR-004 | BR-004 | 미실행 |
| E2E-001 | E2E | 로그인 폼 표시 | FR-001 | - | 미실행 |
| E2E-002 | E2E | 빈 필드 제출 에러 | FR-002 | BR-001, BR-002 | 미실행 |
| E2E-003 | E2E | 잘못된 자격 증명 에러 | FR-003 | BR-003 | 미실행 |
| E2E-004 | E2E | 로그인 성공 리다이렉트 | FR-004 | BR-004 | 미실행 |
| TC-001 | 매뉴얼 | 로그인 폼 UI 검증 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | 유효성 검사 동작 확인 | FR-002 | BR-001, BR-002 | 미실행 |
| TC-003 | 매뉴얼 | 에러 메시지 표시 확인 | FR-003 | BR-003 | 미실행 |
| TC-004 | 매뉴얼 | 로그인 플로우 완료 검증 | FR-004 | BR-004 | 미실행 |

---

## 4. 수용 기준 추적 (AC -> 테스트)

> 수용 기준과 테스트케이스 간 매핑

| 수용 기준 ID | 수용 기준 설명 | 관련 요구사항 | 검증 테스트 | 상태 |
|-------------|---------------|---------------|-------------|------|
| AC-001 | 로그인 폼 렌더링 (이메일, 비밀번호 필드, 로그인 버튼) | FR-001 | UT-001, E2E-001, TC-001 | 미검증 |
| AC-002 | 빈 필드 제출 시 에러 메시지 표시 | FR-002 | UT-004, E2E-002, TC-002 | 미검증 |
| AC-003 | 잘못된 자격 증명 시 에러 메시지 표시 | FR-003 | UT-005, E2E-003, TC-003 | 미검증 |
| AC-004 | 로그인 성공 시 /portal 리다이렉트 | FR-004 | UT-007, E2E-004, TC-004 | 미검증 |

---

## 5. 데이터 모델 추적

> 설계 데이터 요구사항 -> API DTO 매핑

| 설계 데이터 | 데이터 타입 | Request DTO | Response DTO | 용도 |
|------------|------------|-------------|--------------|------|
| 이메일 | string | LoginRequest.email | - | 사용자 인증 식별자 |
| 비밀번호 | string | LoginRequest.password | - | 사용자 인증 자격증명 |
| 세션 정보 | Session | - | SessionResponse | 인증 상태 확인 |
| 리다이렉트 URL | string | callbackUrl (query param) | - | 로그인 후 이동 경로 |

---

## 6. 인터페이스 추적

> 설계 인터페이스 요구사항 -> API 엔드포인트 매핑

| 설계 인터페이스 | API 엔드포인트 | Method | 요구사항 | 설명 |
|----------------|---------------|--------|----------|------|
| 로그인 인증 | /api/auth/signin | POST | FR-001, FR-004 | Auth.js credentials signIn |
| 세션 확인 | /api/auth/session | GET | FR-004 | 현재 세션 정보 조회 |
| 로그아웃 | /api/auth/signout | POST | PRD 4.1.4 | 세션 종료 (Phase 2 범위 가능) |

---

## 7. 화면 추적

> 설계 화면 요구사항 -> 컴포넌트 매핑

| 설계 화면 | 컴포넌트 경로 | 컴포넌트명 | 요구사항 | 설명 |
|----------|--------------|-----------|----------|------|
| 로그인 페이지 | app/(auth)/login/page.tsx | LoginPage | FR-001 ~ FR-004 | 로그인 페이지 루트 |
| 로그인 폼 | components/auth/LoginForm.tsx | LoginForm | FR-001, FR-002, FR-003 | 로그인 폼 컴포넌트 |
| 인증 레이아웃 | app/(auth)/layout.tsx | AuthLayout | - | 인증 관련 공통 레이아웃 |

### 7.1 화면 요소 상세 추적

| 화면 요소 | Ant Design 컴포넌트 | 요구사항 | 비즈니스 규칙 |
|----------|-------------------|----------|--------------|
| 로그인 카드 | Card | FR-001 | - |
| 이메일 필드 | Form.Item + Input | FR-001, FR-002 | BR-001, BR-002 |
| 비밀번호 필드 | Form.Item + Input.Password | FR-001, FR-002 | BR-001 |
| 로그인 버튼 | Button (primary) | FR-001, FR-004 | BR-004 |
| 에러 알림 | Alert (error) | FR-003 | BR-003 |
| 로딩 상태 | Button loading | FR-004 | - |

---

## 8. 추적성 검증 요약

### 8.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 4 | 4 | 0 | 100% |
| 비즈니스 규칙 (BR) | 4 | 4 | 0 | 100% |
| 수용 기준 (AC) | 4 | 4 | 0 | 100% |
| 단위 테스트 (UT) | 7 | 7 | 0 | 100% |
| E2E 테스트 | 4 | 4 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 4 | 4 | 0 | 100% |

### 8.2 요구사항-테스트 커버리지

| 요구사항 ID | 단위 테스트 | E2E 테스트 | 매뉴얼 테스트 | 총 테스트 수 |
|-------------|-------------|------------|---------------|-------------|
| FR-001 | 2 | 1 | 1 | 4 |
| FR-002 | 2 | 1 | 1 | 4 |
| FR-003 | 2 | 1 | 1 | 4 |
| FR-004 | 1 | 1 | 1 | 3 |
| **합계** | **7** | **4** | **4** | **15** |

### 8.3 비즈니스 규칙-테스트 커버리지

| 규칙 ID | 단위 테스트 | E2E 테스트 | 총 테스트 수 |
|---------|-------------|------------|-------------|
| BR-001 | 1 | 1 | 2 |
| BR-002 | 1 | 1 | 2 |
| BR-003 | 1 | 1 | 2 |
| BR-004 | 1 | 1 | 2 |
| **합계** | **4** | **4** | **8** |

### 8.4 미매핑 항목

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | 모든 항목 매핑 완료 |

---

## 9. 관련 문서

| 문서 | 경로 | 용도 |
|------|------|------|
| PRD | `.orchay/projects/mes-portal/prd.md` | 제품 요구사항 정의 |
| 설계 문서 | `tasks/TSK-04-04/010-design.md` | 로그인 페이지 설계 |
| 테스트 명세 | `tasks/TSK-04-04/026-test-specification.md` | 테스트케이스 상세 정의 |
| TSK-04-02 설계 | `tasks/TSK-04-02/010-design.md` | 사용자/역할 데이터 모델 |
| TSK-04-03 설계 | `tasks/TSK-04-03/010-design.md` | Auth.js 인증 설정 |

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-20 | Claude | 최초 작성 |
