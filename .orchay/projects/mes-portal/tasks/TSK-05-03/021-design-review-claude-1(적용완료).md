# 설계 리뷰 결과 (021-design-review-claude-1.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-20

> **목적**: TSK-05-03 Toast 알림 설계 다층 품질 검증 결과
>
> **리뷰어**: Claude | **리뷰 일자**: 2026-01-20

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-05-03 |
| Task명 | Toast 알림 |
| 리뷰 번호 | claude-1 |
| 설계 문서 참조 | `010-design.md` |
| 추적성 매트릭스 참조 | `025-traceability-matrix.md` |
| 테스트 명세 참조 | `026-test-specification.md` |

---

## 1. 검증 대상 문서

| 문서 | 상태 |
|------|------|
| 010-design.md | ✅ 검토 완료 |
| 025-traceability-matrix.md | ✅ 검토 완료 |
| 026-test-specification.md | ✅ 검토 완료 |
| PRD (섹션 4.1.1 알림) | ✅ 참조 |
| TRD (섹션 7 피드백/상태) | ✅ 참조 |

---

## 2. 검증 결과 요약

| 검증 영역 | 평가 | 비고 |
|----------|------|------|
| 문서 완전성 | PASS | 필수 섹션 모두 포함 |
| 요구사항 추적성 | WARN | BR-04, BR-05 매트릭스 누락 |
| 아키텍처 | PASS | SOLID 원칙 준수, TRD 정합성 양호 |
| 보안 | PASS | 기본 XSS 보호, 추가 권장사항 있음 |
| 테스트 가능성 | PASS | UT 15, E2E 6, Manual 12 정의 |

---

## 3. 이슈 분포

**총 이슈: 17건**

| 심각도 | 개수 |
|--------|------|
| Critical | 0 |
| High | 0 |
| Medium | 4 |
| Low | 6 |
| Info | 7 |

| 우선순위 | 개수 |
|----------|------|
| P1 (구현 전 필수) | 0 |
| P2 (구현 초기) | 6 |
| P3 (구현 중) | 5 |
| P4 (구현 후) | 4 |
| P5 (향후) | 2 |

---

## 4. 이슈 상세

### 4.1 아키텍처 이슈

| ID | 심각도 | 우선순위 | 영역 | 설명 | 권장 조치 |
|----|--------|----------|------|------|----------|
| ISS-01 | Medium | P2 | 의존성 | Ant Design message API 직접 의존. 향후 UI 라이브러리 교체 시 수정 범위 증가 | 인터페이스 계약 문서화, 내부 구현만 변경하도록 설계 |
| ISS-02 | Low | P3 | 확장성 | ToastOptions에 icon, className props 미지원 (1.3 범위에서 언급되었으나 7.2에 없음) | ToastOptions에 `icon?: ReactNode`, `className?: string` 추가 검토 |
| ISS-03 | Low | P3 | 타입 안전성 | 함수 오버로딩 시 string/object 구분 로직 미정의 | 구현 시 type guard 예시 코드 추가 |
| ISS-04 | Info | P4 | 테스트 용이성 | Ant Design message DOM 직접 렌더링으로 단위 테스트 어려움 | Vitest mock 전략 명시 |
| ISS-05 | Info | P4 | 국제화 | 메시지 하드코딩 가능성 | i18n key 사용 가이드라인 추가 권장 |
| ISS-06 | Info | P5 | 접근성 | ARIA live region 명세 부족 | Ant Design message 접근성 지원 여부 문서화 |
| ISS-07 | Medium | P2 | 에러 처리 | showLoading duration 미지정. hideToast 미호출 시 영구 표시 | 최대 timeout (30초) 후 자동 제거 검토 |
| ISS-08 | Low | P3 | 일관성 | message vs notification: 닫기(X) 버튼은 notification이 더 자연스러움 | `message.config({ closable: true })` 활용 가능성 확인 |

### 4.2 보안 이슈

| ID | 심각도 | 우선순위 | 영역 | 설명 | 권장 조치 |
|----|--------|----------|------|------|----------|
| SEC-01 | Medium | P2 | XSS | API 에러 메시지 직접 Toast 표시 시 악성 스크립트 실행 위험 | 에러 코드 매핑 사용, sanitization 함수 적용, 최대 길이 제한 |
| SEC-02 | Medium | P2 | 정보노출 | 스택 트레이스, 내부 경로, SQL 에러 등 민감 정보 노출 가능 | 에러 메시지 화이트리스트, 개발/운영 환경별 분리 |
| SEC-03 | Low | P3 | XSS | icon 파라미터가 ReactNode 타입으로 XSS 벡터 가능성 | 허용 아이콘 목록 제한 또는 enum 타입 적용 |
| SEC-04 | Low | P3 | DoS | 다중 Toast 최대 개수 제한 미명시 | 최대 동시 표시 3-5개, rate limiting 구현 |
| SEC-05 | Info | P4 | 입력검증 | content 최소/최대 길이 제한 구현 레벨 미명시 | 최대 200자 제한 및 말줄임 처리 |
| SEC-06 | Info | P4 | 감사추적 | Toast 알림 로깅/감사 추적 기능 미포함 | 에러 Toast 발생 시 로깅 추가 |
| SEC-07 | Info | P5 | 구성관리 | duration 값 하드코딩 가능성 | 환경 변수 또는 설정 파일로 외부화 |

### 4.3 품질 이슈

| ID | 심각도 | 우선순위 | 영역 | 설명 | 권장 조치 |
|----|--------|----------|------|------|----------|
| QA-01 | Medium | P2 | 설계 일관성 | Warning 자동 닫힘 시간: 010-design 4초 vs 026-test 5초 불일치 | 4초 또는 5초로 통일 |
| QA-02 | Medium | P2 | 요구사항 추적 | BR-04, BR-05가 추적성 매트릭스에 누락 | 025-traceability-matrix.md에 추가 및 테스트 매핑 |
| QA-03 | Low | P3 | 테스트 명세 | UT ID 체계 일부 불일치 (UT-001 vs UT-008 혼재) | 테스트 ID 체계 정리 |
| QA-04 | Low | P3 | 설계 문서 | 체크리스트 12.2 상태 미업데이트 (실제 문서 존재) | 체크리스트 상태 업데이트 |
| QA-05 | Info | P4 | 테스트 데이터 | showLoading, hideToast 함수 단위 테스트 불충분 | 해당 함수 테스트 케이스 추가 |
| QA-06 | Info | P4 | 테스트 가능성 | E2E-004 수동 닫기: message API 기본 닫기 버튼 없음 | message.config 설정 또는 notification API 검토 |
| QA-07 | Low | P3 | 인터페이스 | hideAllToasts vs destroyAllToasts 함수명 불일치 | 함수명 통일 |
| QA-08 | Info | P5 | 접근성 | WCAG 2.1 AA 준수 기준 미명시 | 접근성 테스트 기준 명시 권장 |

---

## 5. 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 6 | 6 | 0 | 100% |
| 비즈니스 규칙 (BR) - 설계 | 5 | 3 | 2 | 60% |
| 비즈니스 규칙 (BR) - 매트릭스 | 3 | 3 | 0 | 100% |
| 단위 테스트 (UT) | 15 | 15 | 0 | 100% |
| E2E 테스트 | 6 | 6 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 12 | 12 | 0 | 100% |

---

## 6. PRD 요구사항 대비 검증

| PRD 요구사항 (4.1.1 알림) | 설계 반영 | 테스트 커버 | 상태 |
|--------------------------|----------|------------|------|
| 성공/정보/경고/에러 메시지 | FR-001~004 | UT, E2E, TC | ✅ 완료 |
| 자동 닫힘 (3-5초) | FR-005, BR-03 | E2E-003, TC-003 | ✅ 완료 |
| 수동 닫기 버튼 | FR-006, UC-05 | E2E-004, TC-004 | ⚠️ 구현방안 확인 필요 |

---

## 7. 긍정적 측면

### 아키텍처
- SRP (단일 책임 원칙) 준수: toast.ts가 Toast 표시 책임만 담당
- 함수 오버로딩으로 DX(개발자 경험) 우수
- TRD 테마 토큰과 일관된 색상 체계

### 보안
- Ant Design 프레임워크의 기본 XSS 보호 활용
- TypeScript 타입 안전성으로 의도치 않은 객체 주입 방지
- 테스트 명세서에 XSS 테스트 케이스 포함

### 품질
- 체계적인 문서 구조 (유즈케이스 5개, 시나리오 3개)
- 경계 조건 및 엣지 케이스 테스트 정의
- data-testid 셀렉터 사전 정의로 E2E 테스트 용이

---

## 8. 권장 조치 요약

### P2 - 구현 초기 해결 필수 (6건)

1. **QA-01**: Warning 자동 닫힘 시간 4초 vs 5초 통일
2. **QA-02**: BR-04, BR-05 추적성 매트릭스 추가
3. **SEC-01**: API 에러 메시지 직접 표시 금지 정책, 에러 코드 매핑 구현
4. **SEC-02**: 에러 메시지 화이트리스트 및 환경별 분리
5. **ISS-01**: Ant Design 의존성 인터페이스 계약 문서화
6. **ISS-07**: showLoading 최대 timeout 설정

### P3 - 구현 중 해결 (5건)

7. **QA-03, QA-07**: 테스트 ID 및 함수명 통일
8. **QA-04**: 체크리스트 상태 업데이트
9. **ISS-02**: ToastOptions에 icon, className 추가
10. **ISS-08**: message closable 옵션 또는 notification API 확인
11. **SEC-03, SEC-04**: 아이콘 제한 및 rate limiting 구현

---

## 9. 종합 평가

| 평가 항목 | 점수 (5점) | 비고 |
|----------|-----------|------|
| 문서 완전성 | 4.5 | 필수 섹션 완비, 체크리스트만 업데이트 필요 |
| 요구사항 추적성 | 4.0 | BR-04, BR-05 매트릭스 누락 |
| 아키텍처 | 4.0 | SOLID 준수, 의존성 추상화 권장 |
| 보안 | 4.0 | 기본 보호 양호, API 에러 처리 정책 필요 |
| 테스트 가능성 | 4.5 | 충분한 테스트 시나리오 |
| **종합** | **4.2** | **구현 가능 수준, P2 이슈 해결 후 착수 권장** |

---

## 10. 결론

TSK-05-03 Toast 알림 설계는 전반적으로 양호한 수준입니다.

**Critical/High 심각도 이슈 없음**으로 구현을 진행할 수 있으나, P2 우선순위 이슈 6건에 대해서는 구현 초기에 반드시 해결해야 합니다.

특히 다음 항목에 주의가 필요합니다:
1. **Warning 자동 닫힘 시간 통일** (4초 vs 5초)
2. **API 에러 메시지 처리 정책** (XSS 방지)
3. **수동 닫기 버튼 구현 방안** (message vs notification)

---

---

## 11. 적용 결과

### 적용 일자
2026-01-20

### 맥락 분석 결과

| 검토 항목 | 평가 |
|----------|------|
| 시스템 적합성 | 5/5 |
| Task 범위 적합성 | 5/5 |
| 실현 가능성 | 5/5 |

### 이슈별 처리 결과

| ID | 심각도 | 판단 | 사유 |
|----|--------|------|------|
| QA-01 | Medium | ✅ 적용 | Warning 자동 닫힘 시간 5초로 통일 |
| QA-02 | Medium | ✅ 적용 | BR-04~BR-07 추적성 매트릭스 추가 |
| SEC-01 | Medium | ✅ 적용 | API 에러 메시지 직접 표시 금지 정책 (BR-06) |
| SEC-02 | Medium | ✅ 적용 | 에러 메시지 매핑 코드 예시 추가 |
| ISS-01 | Medium | ⏸️ 보류 | Ant Design 의존성 추상화는 구현 단계에서 결정 |
| ISS-07 | Medium | ✅ 적용 | showLoading 최대 timeout 30초 설정 (BR-07) |
| QA-07 | Low | ✅ 적용 | hideAllToasts → destroyAllToasts 함수명 통일 |
| QA-04 | Low | ✅ 적용 | 체크리스트 상태 업데이트 |

### 수정된 문서

| 문서 | 변경 내용 |
|------|----------|
| 010-design.md | BR-04~BR-07 추가, Warning 5초, 에러 매핑 예시, 체크리스트 업데이트 |
| 025-traceability-matrix.md | BR-04~BR-07, UT-011~UT-015, E2E-007~E2E-008 추가 |

### 적용 통계

| 구분 | 개수 |
|------|------|
| ✅ 적용 | 7건 |
| 📝 조정 적용 | 0건 |
| ⏸️ 보류 | 1건 |

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-20 | Claude | 최초 작성 - 아키텍처/보안/품질 3개 관점 통합 리뷰 |
| 1.1 | 2026-01-20 | Claude | 적용 결과 섹션 추가 |

---

<!--
TSK-05-03 Toast 알림 설계 리뷰
Reviewer: Claude (claude-1)
Date: 2026-01-20
Result: PASS with 17 issues (0 Critical, 0 High, 4 Medium, 6 Low, 7 Info)
-->
