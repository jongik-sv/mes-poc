# TSK-05-04 - 테이블 공통 기능 UI 설계

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-05-04 |
| 문서 버전 | 1.0 |
| 작성일 | 2026-01-20 |
| 상태 | 작성중 |
| 참조 설계 문서 | `010-design.md` |

---

## 1. 화면 목록

| 화면 ID | 화면명 | 목적 | SVG 참조 |
|---------|--------|------|----------|
| SCR-01 | DataTable 기본 | 데이터 테이블 기본 화면 (정렬, 페이징, 선택) | `screen-01-datatable-default.svg` |
| SCR-02 | DataTable 정렬 | 정렬 적용 상태 | `screen-02-datatable-sorted.svg` |
| SCR-03 | DataTable 선택 | 행 선택 상태 (다중) | `screen-03-datatable-selected.svg` |
| SCR-04 | DataTable 리사이즈 | 컬럼 리사이즈 중 | `screen-04-datatable-resize.svg` |
| SCR-05 | DataTable Empty | 데이터 없음 상태 | `screen-05-datatable-empty.svg` |
| SCR-06 | DataTable Loading | 로딩 상태 | `screen-06-datatable-loading.svg` |

---

## 2. 화면 전환 흐름

```mermaid
stateDiagram-v2
    [*] --> Loading: 페이지 진입
    Loading --> Empty: 데이터 없음
    Loading --> Default: 데이터 로드 완료

    Default --> Sorted: 컬럼 헤더 클릭
    Sorted --> Default: 정렬 해제
    Sorted --> Sorted: 다른 컬럼 정렬

    Default --> Selected: 체크박스 클릭
    Selected --> Default: 선택 해제
    Selected --> Selected: 추가 선택

    Default --> Resizing: 컬럼 경계 드래그
    Resizing --> Default: 드래그 완료

    Default --> Loading: 페이지 이동
    Sorted --> Loading: 페이지 이동
    Selected --> Loading: 페이지 이동
```

### 액션-화면 매트릭스

| 현재 상태 | 액션 | 다음 상태 |
|----------|------|----------|
| Loading | 데이터 로드 완료 | Default |
| Loading | 데이터 없음 | Empty |
| Default | 컬럼 헤더 클릭 | Sorted |
| Default | 체크박스 클릭 | Selected |
| Default | 컬럼 경계 드래그 | Resizing |
| Default | 페이지 번호 클릭 | Loading → Default |
| Sorted | 동일 헤더 클릭 | Sorted (방향 변경) |
| Sorted | 3번째 클릭 | Default (정렬 해제) |
| Selected | 체크박스 클릭 | Selected/Default |
| Resizing | 드래그 종료 | Default |

---

## 3. 화면별 상세

### 3.1 SCR-01: DataTable 기본

**화면 목적:**
모든 목록 화면에서 사용되는 기본 테이블 컴포넌트. 정렬 가능한 컬럼 헤더, 페이지네이션, 행 선택 체크박스가 표시된다.

**레이아웃:**

```
┌────────────────────────────────────────────────────────────────────────────────┐
│ DataTable                                                                      │
├────────────────────────────────────────────────────────────────────────────────┤
│  ┌──────┬──────────────┬──────────────┬──────────────┬───────────────────────┐│
│  │ □    │ 이름 ↕      │ 상태 ↕      │ 생성일 ↕    │ 작업                  ││
│  ├──────┼──────────────┼──────────────┼──────────────┼───────────────────────┤│
│  │ □    │ 홍길동       │ 활성         │ 2026-01-15   │ [수정] [삭제]         ││
│  │ □    │ 김철수       │ 비활성       │ 2026-01-14   │ [수정] [삭제]         ││
│  │ □    │ 이영희       │ 활성         │ 2026-01-13   │ [수정] [삭제]         ││
│  │ □    │ 박민수       │ 대기         │ 2026-01-12   │ [수정] [삭제]         ││
│  │ □    │ 정수연       │ 활성         │ 2026-01-11   │ [수정] [삭제]         ││
│  └──────┴──────────────┴──────────────┴──────────────┴───────────────────────┘│
│                                                                                │
│  ┌────────────────────────────────────────────────────────────────────────────┐│
│  │ 총 125건            [10 ▼] 건/페이지  [<] [1] [2] [3] ... [13] [>]        ││
│  └────────────────────────────────────────────────────────────────────────────┘│
└────────────────────────────────────────────────────────────────────────────────┘
```

**컴포넌트 구성:**

| 컴포넌트 | Ant Design | Props |
|----------|------------|-------|
| 테이블 | `Table` | columns, dataSource, pagination, rowSelection |
| 체크박스 | `Checkbox` | (rowSelection 내장) |
| 정렬 아이콘 | 내장 | sorter: true |
| 페이지네이션 | 내장 | pagination: {...} |
| 페이지 크기 셀렉터 | 내장 | showSizeChanger: true |

**상태 정의:**

| 상태 | 설명 | 시각적 표현 |
|------|------|------------|
| 기본 | 초기 로드 상태 | 정렬 아이콘 회색, 체크박스 미선택 |
| 호버 | 행에 마우스 올림 | 행 배경색 연하게 변경 (hover) |
| 포커스 | 키보드 포커스 | 아웃라인 표시 |

**액션 정의:**

| 액션 | 트리거 | 결과 |
|------|--------|------|
| 정렬 | 헤더 클릭 | 정렬 적용/변경/해제 |
| 선택 | 체크박스 클릭 | 행 선택/해제 |
| 페이지 이동 | 페이지 번호 클릭 | 데이터 변경 |
| 페이지 크기 변경 | 드롭다운 선택 | 크기 변경 + 첫 페이지 |

### 3.2 SCR-02: DataTable 정렬

**화면 목적:**
정렬이 적용된 상태의 테이블. 정렬 방향에 따라 아이콘이 활성화된다.

**상태별 변화:**

| 정렬 상태 | 아이콘 | 데이터 순서 |
|----------|--------|------------|
| 미정렬 | ↕ (회색) | 원본 순서 |
| 오름차순 | ↑ (파란색) | A→Z, 1→9 |
| 내림차순 | ↓ (파란색) | Z→A, 9→1 |

### 3.3 SCR-03: DataTable 선택

**화면 목적:**
행이 선택된 상태의 테이블. 선택된 행은 배경색이 변경되고 체크박스가 체크된다.

**상태별 변화:**

| 선택 상태 | 체크박스 | 행 배경색 |
|----------|----------|----------|
| 미선택 | □ | 투명/흰색 |
| 선택됨 | ☑ | primary-1 (연한 파란색) |
| 전체 선택 | ☑ (헤더) | 현재 페이지 전체 강조 |

### 3.4 SCR-04: DataTable 리사이즈

**화면 목적:**
컬럼 리사이즈가 진행 중인 상태. 드래그 핸들과 가이드라인이 표시된다.

**인터랙션:**

| 요소 | 상태 | 시각적 표현 |
|------|------|------------|
| 컬럼 경계 | 기본 | 보이지 않음 |
| 컬럼 경계 | 호버 | 커서 변경 (col-resize) |
| 컬럼 경계 | 드래그 중 | 가이드라인 표시 |

### 3.5 SCR-05: DataTable Empty

**화면 목적:**
데이터가 없을 때 표시되는 빈 상태 화면.

**레이아웃:**

```
┌────────────────────────────────────────────────────────────────────────────────┐
│ DataTable                                                                      │
├────────────────────────────────────────────────────────────────────────────────┤
│  ┌──────┬──────────────┬──────────────┬──────────────┬───────────────────────┐│
│  │ □    │ 이름 ↕      │ 상태 ↕      │ 생성일 ↕    │ 작업                  ││
│  ├──────┴──────────────┴──────────────┴──────────────┴───────────────────────┤│
│  │                                                                            ││
│  │                          [빈 상자 아이콘]                                  ││
│  │                                                                            ││
│  │                      표시할 데이터가 없습니다                              ││
│  │                                                                            ││
│  └────────────────────────────────────────────────────────────────────────────┘│
└────────────────────────────────────────────────────────────────────────────────┘
```

**컴포넌트:**
- `Empty` (Ant Design) - 빈 상태 표시

### 3.6 SCR-06: DataTable Loading

**화면 목적:**
데이터 로딩 중 상태.

**레이아웃:**

```
┌────────────────────────────────────────────────────────────────────────────────┐
│ DataTable                                                                      │
├────────────────────────────────────────────────────────────────────────────────┤
│  ┌──────┬──────────────┬──────────────┬──────────────┬───────────────────────┐│
│  │ □    │ 이름 ↕      │ 상태 ↕      │ 생성일 ↕    │ 작업                  ││
│  ├──────┴──────────────┴──────────────┴──────────────┴───────────────────────┤│
│  │                                                                            ││
│  │                            [스피너]                                        ││
│  │                                                                            ││
│  │                       데이터를 불러오는 중...                              ││
│  │                                                                            ││
│  └────────────────────────────────────────────────────────────────────────────┘│
└────────────────────────────────────────────────────────────────────────────────┘
```

**컴포넌트:**
- `Spin` (Ant Design) - 로딩 스피너
- `Table` loading prop 사용

---

## 4. 공통 컴포넌트

### 4.1 테이블 헤더 셀

| 요소 | 설명 | 스타일 |
|------|------|--------|
| 컬럼명 | 텍스트 | font-weight: 500 |
| 정렬 아이콘 | 오름/내림차순 | 우측 배치, 활성 시 primary 색상 |
| 리사이즈 핸들 | 드래그 영역 | 우측 경계, width: 4px, cursor: col-resize |

### 4.2 페이지네이션

| 요소 | 설명 | 스타일 |
|------|------|--------|
| 총 건수 | "총 N건" 텍스트 | 좌측 정렬 |
| 페이지 크기 | 드롭다운 | 기본값 10 |
| 페이지 번호 | 번호 버튼 | 활성 페이지 primary 색상 |
| 이전/다음 | 화살표 버튼 | 비활성 시 회색 |

### 4.3 행 선택

| 요소 | 설명 | 스타일 |
|------|------|--------|
| 체크박스 | 다중 선택 | Ant Design Checkbox |
| 라디오 | 단일 선택 | Ant Design Radio |
| 선택된 행 | 배경색 | colorPrimary-1 (연한 파란색) |

---

## 5. 반응형 설계

### 5.1 Breakpoint 정의

| Breakpoint | 크기 | 설명 |
|------------|------|------|
| Desktop | 1024px+ | 모든 컬럼 표시, 기본 레이아웃 |
| Tablet | 768-1023px | 가로 스크롤 또는 일부 컬럼 숨김 |
| Mobile | 767px- | 가로 스크롤 활성화 또는 카드형 변환 |

### 5.2 반응형 동작

| 화면 크기 | 테이블 동작 | 페이지네이션 |
|----------|------------|-------------|
| Desktop | 전체 표시 | 전체 컨트롤 표시 |
| Tablet | scroll.x 활성화 | 간소화 (숫자만) |
| Mobile | scroll.x 활성화, 컬럼 축소 | 미니 모드 |

---

## 6. 접근성

### 6.1 키보드 네비게이션

| 키 | 동작 |
|-----|------|
| Tab | 포커스 이동 (헤더 → 행 → 페이지네이션) |
| Enter | 현재 포커스 항목 활성화 (정렬, 페이지 이동) |
| Space | 체크박스 토글 |
| Arrow Up/Down | 행 간 이동 |

### 6.2 ARIA 속성

| 요소 | ARIA 속성 | 값 |
|------|----------|-----|
| 테이블 | role | table |
| 헤더 | role | columnheader |
| 정렬 버튼 | aria-sort | ascending/descending/none |
| 행 | aria-selected | true/false |
| 체크박스 | aria-checked | true/false |

### 6.3 색상 대비

- 텍스트: #000000 on #FFFFFF (대비율 21:1)
- 선택된 행: #1677ff 배경 위 흰색 텍스트 (대비율 4.5:1 이상)
- 비활성 아이콘: #BFBFBF (장식적 요소로 색상 대비 요구 없음)

---

## 7. SVG 파일 목록

| 파일명 | 화면 | 상태 |
|--------|------|------|
| `screen-01-datatable-default.svg` | DataTable 기본 | 기본 |
| `screen-02-datatable-sorted.svg` | DataTable 정렬 | 정렬 적용 |
| `screen-03-datatable-selected.svg` | DataTable 선택 | 다중 선택 |
| `screen-04-datatable-resize.svg` | DataTable 리사이즈 | 드래그 중 |
| `screen-05-datatable-empty.svg` | DataTable Empty | 데이터 없음 |
| `screen-06-datatable-loading.svg` | DataTable Loading | 로딩 중 |

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-20 | Claude | 최초 작성 |
