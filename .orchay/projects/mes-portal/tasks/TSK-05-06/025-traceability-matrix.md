# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 - **Last Updated:** 2026-01-20

> **목적**: PRD -> 기본설계 -> 상세설계 -> 테스트 4단계 양방향 추적
>
> **참조**: 이 문서는 `010-tech-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-05-06 |
| Task명 | 키보드 단축키 시스템 |
| 설계 문서 참조 | `010-tech-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-20 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR -> 설계 -> 테스트)

> PRD -> 설계 -> 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 구현 컴포넌트 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------|--------------|-------------|------------|-----------|------|
| FR-001 | 4.1.1 키보드 단축키 | 5.1 | useGlobalHotkeys.ts | UT-0506-001, UT-0506-002 | E2E-0506-001 | TC-0506-001 | 설계완료 |
| FR-002 | 4.1.1 키보드 단축키 | 5.2 | useGlobalHotkeys.ts | UT-0506-003, UT-0506-004 | E2E-0506-002 | TC-0506-002 | 설계완료 |
| FR-003 | 4.1.1 키보드 단축키 | 5.3 | useGlobalHotkeys.ts | UT-0506-005, UT-0506-006 | E2E-0506-003 | TC-0506-003 | 설계완료 |
| FR-004 | 4.1.1 키보드 단축키 | 5.4 | useGlobalHotkeys.ts | UT-0506-007, UT-0506-008 | E2E-0506-004 | TC-0506-004 | 설계완료 |
| FR-005 | 4.1.1 키보드 단축키 | 5.5 | useGlobalHotkeys.ts | UT-0506-009, UT-0506-010 | E2E-0506-005 | TC-0506-005 | 설계완료 |
| FR-006 | 4.1.1 키보드 단축키 | 5.6 | HotkeyHelp.tsx | UT-0506-011, UT-0506-012 | E2E-0506-006 | TC-0506-006 | 설계완료 |
| FR-007 | 4.1.1 키보드 단축키 | 6.1 | useGlobalHotkeys.ts | UT-0506-013, UT-0506-014 | E2E-0506-007 | TC-0506-007 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 전역 검색 단축키 (Ctrl/Cmd + K)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 전역 검색 (Ctrl/Cmd + K) |
| 설계 | 010-tech-design.md | 5.1 | 전역 검색 모달 열기 단축키 |
| 설계 | 010-tech-design.md | 7.2 | HotkeyConfig 인터페이스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-001, UT-0506-002 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-001 |

#### FR-002: 저장 단축키 (Ctrl/Cmd + S)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 저장 (Ctrl/Cmd + S) |
| 설계 | 010-tech-design.md | 5.2 | 현재 화면 저장 단축키 |
| 설계 | 010-tech-design.md | 7.2 | HotkeyConfig 인터페이스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-003, UT-0506-004 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-002 |

#### FR-003: 새로고침 단축키 (F5 또는 Ctrl/Cmd + R)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 새로고침 (F5 또는 Ctrl/Cmd + R) |
| 설계 | 010-tech-design.md | 5.3 | 현재 탭 새로고침 단축키 |
| 설계 | 010-tech-design.md | 7.2 | HotkeyConfig 인터페이스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-005, UT-0506-006 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-003 |

#### FR-004: 탭 닫기 단축키 (Ctrl/Cmd + W)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 탭 닫기 (Ctrl/Cmd + W) |
| 설계 | 010-tech-design.md | 5.4 | 현재 탭 닫기 단축키 |
| 설계 | 010-tech-design.md | 7.2 | HotkeyConfig 인터페이스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-007, UT-0506-008 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-004 |

#### FR-005: 탭 전환 단축키 (Ctrl/Cmd + Tab)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 탭 전환 (Ctrl/Cmd + Tab) |
| 설계 | 010-tech-design.md | 5.5 | 다음/이전 탭 전환 단축키 |
| 설계 | 010-tech-design.md | 7.2 | HotkeyConfig 인터페이스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-009, UT-0506-010 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-005 |

#### FR-006: 단축키 도움말 표시 (?)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 단축키 도움말 표시 (?) |
| 설계 | 010-tech-design.md | 5.6 | 단축키 도움말 모달 컴포넌트 |
| 설계 | 010-tech-design.md | 7.2 | HotkeyHelpProps 인터페이스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-011, UT-0506-012 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-006 |

#### FR-007: 입력 필드 포커스 시 단축키 비활성화

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 키보드 단축키 | 입력 필드 포커스 시 단축키 비활성화 |
| 설계 | 010-tech-design.md | 6.1 | isInputElement 헬퍼 함수 |
| 설계 | 010-tech-design.md | 8.1 | BR-001 비즈니스 규칙 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-0506-013, UT-0506-014 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-0506-007 |

---

## 2. 비즈니스 규칙 추적 (BR -> 구현 -> 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | 4.1.1 | 8.1 BR-01 | useGlobalHotkeys | UT-0506-013, UT-0506-014, UT-0506-015 | E2E-0506-007 | 입력 필드 포커스 상태에서 단축키 미동작 확인 | 설계완료 |
| BR-002 | - | 8.1 BR-02 | useGlobalHotkeys | UT-0506-016, UT-0506-017 | E2E-0506-008 | OS별 modifier 키 자동 전환 확인 | 설계완료 |
| BR-003 | - | 8.1 BR-03 | useGlobalHotkeys | UT-0506-018, UT-0506-019 | E2E-0506-009 | preventDefault로 브라우저 기본 동작 차단 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 입력 필드(input, textarea, contenteditable) 포커스 시 일반 단축키 비활성화

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 입력 필드 포커스 시 단축키 비활성화 |
| **설계 표현** | 010-tech-design.md 8.1 BR-01: input, textarea, contenteditable 요소 포커스 시 전역 단축키 비활성화 |
| **구현 위치** | useGlobalHotkeys - isInputElement 헬퍼 함수로 포커스 요소 검사 |
| **검증 방법** | 입력 필드에 포커스된 상태에서 Ctrl+K 등 단축키 입력 시 동작하지 않음 확인 |
| **관련 테스트** | UT-0506-013, UT-0506-014, UT-0506-015, E2E-0506-007 |

#### BR-002: OS에 따라 modifier 키 자동 전환 (Mac: Cmd, Windows/Linux: Ctrl)

| 구분 | 내용 |
|------|------|
| **PRD 원문** | (암묵적 요구사항) 크로스 플랫폼 단축키 지원 |
| **설계 표현** | 010-tech-design.md 8.1 BR-02: navigator.platform 기반 OS 감지 및 modifier 키 자동 매핑 |
| **구현 위치** | useGlobalHotkeys - isMac 감지 및 mod 키 자동 변환 |
| **검증 방법** | Mac에서는 Cmd+K, Windows에서는 Ctrl+K로 동일 기능 동작 확인 |
| **관련 테스트** | UT-0506-016, UT-0506-017, E2E-0506-008 |

#### BR-003: 브라우저 기본 단축키와 충돌 시 커스텀 동작 우선 (e.preventDefault)

| 구분 | 내용 |
|------|------|
| **PRD 원문** | (암묵적 요구사항) 브라우저 기본 동작 대신 앱 기능 실행 |
| **설계 표현** | 010-tech-design.md 8.1 BR-03: e.preventDefault()로 브라우저 기본 동작 차단 |
| **구현 위치** | useGlobalHotkeys - 이벤트 핸들러에서 preventDefault 호출 |
| **검증 방법** | Ctrl+S 입력 시 브라우저 저장 대화상자 대신 앱 저장 기능 실행 확인 |
| **관련 테스트** | UT-0506-018, UT-0506-019, E2E-0506-009 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 -> 요구사항 역추적용 (build/verify 단계 결과서 생성 시 활용)

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-0506-001 | 단위 | FR-001 | - | 미실행 |
| UT-0506-002 | 단위 | FR-001 | - | 미실행 |
| UT-0506-003 | 단위 | FR-002 | - | 미실행 |
| UT-0506-004 | 단위 | FR-002 | - | 미실행 |
| UT-0506-005 | 단위 | FR-003 | - | 미실행 |
| UT-0506-006 | 단위 | FR-003 | - | 미실행 |
| UT-0506-007 | 단위 | FR-004 | - | 미실행 |
| UT-0506-008 | 단위 | FR-004 | - | 미실행 |
| UT-0506-009 | 단위 | FR-005 | - | 미실행 |
| UT-0506-010 | 단위 | FR-005 | - | 미실행 |
| UT-0506-011 | 단위 | FR-006 | - | 미실행 |
| UT-0506-012 | 단위 | FR-006 | - | 미실행 |
| UT-0506-013 | 단위 | FR-007 | BR-001 | 미실행 |
| UT-0506-014 | 단위 | FR-007 | BR-001 | 미실행 |
| UT-0506-015 | 단위 | - | BR-001 | 미실행 |
| UT-0506-016 | 단위 | - | BR-002 | 미실행 |
| UT-0506-017 | 단위 | - | BR-002 | 미실행 |
| UT-0506-018 | 단위 | - | BR-003 | 미실행 |
| UT-0506-019 | 단위 | - | BR-003 | 미실행 |
| E2E-0506-001 | E2E | FR-001 | - | 미실행 |
| E2E-0506-002 | E2E | FR-002 | - | 미실행 |
| E2E-0506-003 | E2E | FR-003 | - | 미실행 |
| E2E-0506-004 | E2E | FR-004 | - | 미실행 |
| E2E-0506-005 | E2E | FR-005 | - | 미실행 |
| E2E-0506-006 | E2E | FR-006 | - | 미실행 |
| E2E-0506-007 | E2E | FR-007 | BR-001 | 미실행 |
| E2E-0506-008 | E2E | - | BR-002 | 미실행 |
| E2E-0506-009 | E2E | - | BR-003 | 미실행 |
| TC-0506-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-0506-002 | 매뉴얼 | FR-002 | - | 미실행 |
| TC-0506-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-0506-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-0506-005 | 매뉴얼 | FR-005 | - | 미실행 |
| TC-0506-006 | 매뉴얼 | FR-006 | - | 미실행 |
| TC-0506-007 | 매뉴얼 | FR-007 | BR-001 | 미실행 |

---

## 4. 데이터 모델 추적

> 본 Task는 프론트엔드 UI 컴포넌트로, 백엔드 데이터 모델이 아닌 프론트엔드 상태만 관리합니다.

| 기본설계 엔티티 | 상세설계 Prisma 모델 | API Request DTO | API Response DTO |
|----------------|---------------------|-----------------|------------------|
| - | - | - | - |

### 4.1 프론트엔드 상태 관리

| 상태명 | 타입 | 설명 | 관련 요구사항 |
|--------|------|------|---------------|
| isHelpModalOpen | boolean | 단축키 도움말 모달 열림 상태 | FR-006 |
| registeredHotkeys | HotkeyConfig[] | 등록된 단축키 목록 | FR-001~FR-006 |

---

## 5. 인터페이스 추적

> 프론트엔드 컴포넌트 Props 및 Hook 인터페이스 매핑

| 설계 인터페이스 | 구현 컴포넌트 | Props/Return 타입 | 요구사항 |
|----------------|-------------|-------------------|----------|
| HotkeyConfig | useGlobalHotkeys.ts | key, callback, description, enableOnInput | FR-001~FR-007 |
| UseGlobalHotkeysReturn | useGlobalHotkeys.ts | registerHotkey, unregisterHotkey, getHotkeyList | FR-001~FR-007 |
| HotkeyHelpProps | HotkeyHelp.tsx | open, onClose, hotkeys | FR-006 |

### 5.1 인터페이스 상세 정의

#### HotkeyConfig

```typescript
interface HotkeyConfig {
  key: string;              // 단축키 조합 (예: 'mod+k', 'mod+s')
  callback: () => void;     // 실행할 콜백 함수
  description: string;      // 단축키 설명 (도움말 표시용)
  enableOnInput?: boolean;  // 입력 필드에서도 활성화 여부 (기본: false)
}
```

#### HotkeyHelpProps

```typescript
interface HotkeyHelpProps {
  open: boolean;            // 모달 열림 상태
  onClose: () => void;      // 모달 닫기 콜백
  hotkeys: HotkeyConfig[];  // 표시할 단축키 목록
}
```

---

## 6. 화면 추적

> 설계 화면 요구사항 -> 구현 컴포넌트 매핑

| 설계 화면 | 설계 문서 섹션 | 구현 컴포넌트 | 요구사항 |
|----------|--------------|--------------|----------|
| 단축키 도움말 모달 | 5.6 | HotkeyHelp.tsx | FR-006 |

### 6.1 단축키 도움말 모달 화면 구성

| 영역 | 구성 요소 | 설명 |
|------|----------|------|
| 헤더 | 제목 + 닫기 버튼 | "키보드 단축키" 제목, X 버튼 또는 ESC로 닫기 |
| 본문 | 단축키 테이블 | 카테고리별 단축키 목록 (키 조합 + 설명) |
| 푸터 | - | 없음 (간결한 정보 제공) |

### 6.2 단축키 목록 표시 형식

| 카테고리 | 단축키 | 설명 |
|---------|--------|------|
| 검색 | Ctrl/Cmd + K | 전역 검색 열기 |
| 편집 | Ctrl/Cmd + S | 현재 화면 저장 |
| 탐색 | Ctrl/Cmd + W | 현재 탭 닫기 |
| 탐색 | Ctrl/Cmd + Tab | 다음 탭으로 전환 |
| 탐색 | Ctrl/Cmd + Shift + Tab | 이전 탭으로 전환 |
| 새로고침 | F5, Ctrl/Cmd + R | 현재 탭 새로고침 |
| 도움말 | ? | 단축키 도움말 표시 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 7 | 7 | 0 | 100% |
| 비즈니스 규칙 (BR) | 3 | 3 | 0 | 100% |
| 단위 테스트 (UT) | 19 | 19 | 0 | 100% |
| E2E 테스트 | 9 | 9 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 7 | 7 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

### 7.3 요구사항-테스트 커버리지 매트릭스

| 요구사항 | UT 커버리지 | E2E 커버리지 | 매뉴얼 TC 커버리지 |
|----------|------------|-------------|-------------------|
| FR-001 | UT-0506-001, UT-0506-002 | E2E-0506-001 | TC-0506-001 |
| FR-002 | UT-0506-003, UT-0506-004 | E2E-0506-002 | TC-0506-002 |
| FR-003 | UT-0506-005, UT-0506-006 | E2E-0506-003 | TC-0506-003 |
| FR-004 | UT-0506-007, UT-0506-008 | E2E-0506-004 | TC-0506-004 |
| FR-005 | UT-0506-009, UT-0506-010 | E2E-0506-005 | TC-0506-005 |
| FR-006 | UT-0506-011, UT-0506-012 | E2E-0506-006 | TC-0506-006 |
| FR-007 | UT-0506-013, UT-0506-014 | E2E-0506-007 | TC-0506-007 |
| BR-001 | UT-0506-013, UT-0506-014, UT-0506-015 | E2E-0506-007 | TC-0506-007 |
| BR-002 | UT-0506-016, UT-0506-017 | E2E-0506-008 | - |
| BR-003 | UT-0506-018, UT-0506-019 | E2E-0506-009 | - |

### 7.4 구현 컴포넌트 요약

| 컴포넌트 | 파일 경로 | 커버하는 요구사항 |
|----------|----------|------------------|
| useGlobalHotkeys | lib/hooks/useGlobalHotkeys.ts | FR-001~FR-007, BR-001~BR-003 |
| HotkeyHelp | components/common/HotkeyHelp.tsx | FR-006 |

---

## 관련 문서

- 설계: `010-tech-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`
- WBS: `.orchay/projects/mes-portal/wbs.yaml`

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-20 | Claude | 최초 작성 |
