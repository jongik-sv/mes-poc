# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-06-12 |
| Task명 | [샘플] 품질 검사 입력 폼 |
| 설계 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-22 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 유즈케이스 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|-----------|-----------|-------------|------------|-----------|------|
| FR-001 | 4.1.1 | 3.2 UC-01 | UC-01: 검사 유형 선택 | UT-001 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.1.1 | 3.2 UC-02 | UC-02: 검사 항목 입력 | UT-002 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 4.1.1 | 3.2 UC-03,04 | UC-03,04: 반복 항목 추가/삭제 | UT-003,UT-004 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 4.1.1 | 3.2 UC-05 | UC-05: 조건부 필드 입력 | UT-005 | E2E-004 | TC-004 | 설계완료 |
| FR-005 | 4.1.1 | 3.2 UC-06 | UC-06: 이미지 첨부 | UT-006 | E2E-005 | TC-005 | 설계완료 |
| FR-006 | 4.1.1 | 3.2 UC-07 | UC-07: 미리보기 | UT-007 | E2E-006 | TC-006 | 설계완료 |
| FR-007 | 4.1.1 | 3.2 UC-08 | UC-08: 제출 | UT-008 | E2E-007 | TC-007 | 설계완료 |
| FR-008 | 4.1.1 | 3.2 UC-09 | UC-09: 초기화 | UT-009 | E2E-008 | TC-008 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 검사 유형 선택에 따른 동적 필드 렌더링

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 검사 유형 선택 시 동적 필드 렌더링 |
| 설계 | 010-design.md | 3.2 UC-01 | 검사 유형(치수/외관/기능) Segmented 선택 |
| 화면 | 010-design.md | 5.2 | 검사 유형 Segmented 컴포넌트 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 |

#### FR-002: 검사 항목 입력

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 검사 데이터 입력 |
| 설계 | 010-design.md | 3.2 UC-02 | 측정값, 기준값, 검사 결과 입력 |
| 화면 | 010-design.md | 5.2 | 측정 항목 Form.Item 필드 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-002 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002 |

#### FR-003: 반복 항목 추가/삭제 (Form.List)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 반복 항목 추가/삭제 (Form.List) |
| 설계 | 010-design.md | 3.2 UC-03,04 | Form.List add/remove 동작 |
| 화면 | 010-design.md | 5.2 | [+ 항목 추가], [삭제] 버튼 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-003, UT-004 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003 |

#### FR-004: 조건부 필드 표시 (검사 결과에 따른 추가 입력)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 조건부 필드 표시 (검사 결과에 따른 추가 입력) |
| 설계 | 010-design.md | 3.2 UC-05 | 불합격 시 불량유형/불량사유/조치사항 표시 |
| 화면 | 010-design.md | 5.2 | 조건부 불량 상세 필드 영역 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-005 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-004 |

#### FR-005: 파일 첨부 (이미지 업로드)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 파일 첨부 (이미지 업로드) |
| 설계 | 010-design.md | 3.2 UC-06 | Upload.Dragger 이미지 업로드, 미리보기 |
| 화면 | 010-design.md | 5.2 | 첨부 이미지 Upload 영역 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-006 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-005 |

#### FR-006: 폼 데이터 미리보기

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 폼 데이터 미리보기 및 제출 |
| 설계 | 010-design.md | 3.2 UC-07 | 입력 데이터 요약 미리보기 모달 |
| 화면 | 010-design.md | 5.2 | [미리보기] 버튼, Modal |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-007 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-006 |

#### FR-007: 제출

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 폼 데이터 미리보기 및 제출 |
| 설계 | 010-design.md | 3.2 UC-08 | 유효성 검사 후 저장, 로딩 표시, 성공 토스트 |
| 화면 | 010-design.md | 5.2 | [저장] 버튼 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-008 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-007 |

#### FR-008: 초기화

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | - |
| 설계 | 010-design.md | 3.2 UC-09 | 폼 초기화 기능 |
| 화면 | 010-design.md | 5.2 | [초기화] 버튼 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-009 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-008 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|-----------|-----------------|-------------|------------|-----------|------|
| BR-01 | 4.1.1 | 8.1 | QualityInspection.tsx | UT-010 | E2E-001 | 검사 유형 변경 시 해당 필드만 표시 | 설계완료 |
| BR-02 | 4.1.1 | 8.1 | Form validation | UT-011 | E2E-004 | 불합격 시 불량 상세 필드 필수 검증 | 설계완료 |
| BR-03 | 4.1.1 | 8.1 | DimensionInspection.tsx | UT-012 | E2E-002 | 허용오차 기준 자동 판정 계산 확인 | 설계완료 |
| BR-04 | 4.1.1 | 8.1 | Form validation | UT-013 | E2E-007 | 최소 1개 검사 항목 필수 검증 | 설계완료 |
| BR-05 | 4.1.1 | 8.1 | Form.List | UT-014 | E2E-003 | 최대 10개 제한 확인 | 설계완료 |
| BR-06 | 4.1.1 | 8.1 | Upload component | UT-015 | E2E-005 | 이미지 5개/5MB 제한 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-01: 검사 유형 변경 시 해당 유형 필드만 표시

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 검사 유형 선택 시 동적 필드 렌더링 |
| **설계 표현** | 010-design.md 섹션 8.1 BR-01 |
| **구현 위치** | QualityInspection.tsx (조건부 렌더링) |
| **검증 방법** | 치수→외관→기능 전환 시 해당 필드만 표시 확인 |
| **관련 테스트** | UT-010, E2E-001 |

#### BR-02: 검사 결과 불합격 시 불량 상세 필드 필수

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 조건부 필드 표시 (검사 결과에 따른 추가 입력) |
| **설계 표현** | 010-design.md 섹션 8.1 BR-02 |
| **구현 위치** | Form.Item rules (conditional required) |
| **검증 방법** | 불합격 선택 시 불량유형/불량사유 필수, 미입력 시 에러 |
| **관련 테스트** | UT-011, E2E-004 |

#### BR-03: 치수 검사 판정은 허용오차 기준 자동 계산

| 구분 | 내용 |
|------|------|
| **PRD 원문** | (암묵적) 치수 검사 자동 판정 |
| **설계 표현** | 010-design.md 섹션 8.1 BR-03, 8.2 상세 설명 |
| **구현 위치** | DimensionInspection.tsx (useEffect 계산) |
| **검증 방법** | 기준값=100, 허용오차=±0.5, 측정값=100.3→합격, 100.8→불합격 |
| **관련 테스트** | UT-012, E2E-002 |

#### BR-04: 최소 1개 검사 항목 필수

| 구분 | 내용 |
|------|------|
| **PRD 원문** | (암묵적) 의미있는 검사 데이터 |
| **설계 표현** | 010-design.md 섹션 8.1 BR-04 |
| **구현 위치** | Form validation, Form.List min check |
| **검증 방법** | 마지막 항목 삭제 시도 시 버튼 비활성화 |
| **관련 테스트** | UT-013, E2E-007 |

#### BR-05: 최대 10개 검사 항목까지 추가 가능

| 구분 | 내용 |
|------|------|
| **PRD 원문** | (암묵적) 합리적 항목 수 제한 |
| **설계 표현** | 010-design.md 섹션 8.1 BR-05 |
| **구현 위치** | Form.List add button disabled logic |
| **검증 방법** | 10개 항목 추가 후 [항목 추가] 버튼 비활성화 확인 |
| **관련 테스트** | UT-014, E2E-003 |

#### BR-06: 이미지는 최대 5개, 각 5MB 이하

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 파일 첨부 (이미지 업로드) |
| **설계 표현** | 010-design.md 섹션 8.1 BR-06 |
| **구현 위치** | Upload beforeUpload, maxCount |
| **검증 방법** | 5개 초과/5MB 초과 시 에러 메시지 확인 |
| **관련 테스트** | UT-015, E2E-005 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | BR-01 | 미실행 |
| UT-002 | 단위 | FR-002 | - | 미실행 |
| UT-003 | 단위 | FR-003 | - | 미실행 |
| UT-004 | 단위 | FR-003 | - | 미실행 |
| UT-005 | 단위 | FR-004 | BR-02 | 미실행 |
| UT-006 | 단위 | FR-005 | BR-06 | 미실행 |
| UT-007 | 단위 | FR-006 | - | 미실행 |
| UT-008 | 단위 | FR-007 | - | 미실행 |
| UT-009 | 단위 | FR-008 | - | 미실행 |
| UT-010 | 단위 | - | BR-01 | 미실행 |
| UT-011 | 단위 | - | BR-02 | 미실행 |
| UT-012 | 단위 | - | BR-03 | 미실행 |
| UT-013 | 단위 | - | BR-04 | 미실행 |
| UT-014 | 단위 | - | BR-05 | 미실행 |
| UT-015 | 단위 | - | BR-06 | 미실행 |
| E2E-001 | E2E | FR-001 | BR-01 | 미실행 |
| E2E-002 | E2E | FR-002 | BR-03 | 미실행 |
| E2E-003 | E2E | FR-003 | BR-05 | 미실행 |
| E2E-004 | E2E | FR-004 | BR-02 | 미실행 |
| E2E-005 | E2E | FR-005 | BR-06 | 미실행 |
| E2E-006 | E2E | FR-006 | - | 미실행 |
| E2E-007 | E2E | FR-007 | BR-04 | 미실행 |
| E2E-008 | E2E | FR-008 | - | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | BR-01 | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | BR-03 | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | BR-04, BR-05 | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | BR-02 | 미실행 |
| TC-005 | 매뉴얼 | FR-005 | BR-06 | 미실행 |
| TC-006 | 매뉴얼 | FR-006 | - | 미실행 |
| TC-007 | 매뉴얼 | FR-007 | - | 미실행 |
| TC-008 | 매뉴얼 | FR-008 | - | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 타입 → 컴포넌트 Props 매핑 (Frontend Only)

| 설계 타입 | 컴포넌트 | 용도 |
|----------|----------|------|
| QualityInspectionFormData | QualityInspection.tsx | 전체 폼 상태 |
| DimensionItem | DimensionInspection.tsx | 치수 검사 항목 |
| AppearanceItem | AppearanceInspection.tsx | 외관 검사 항목 |
| FunctionItem | FunctionInspection.tsx | 기능 검사 항목 |
| UploadFile (Ant Design) | Upload 컴포넌트 | 이미지 파일 |

---

## 5. 화면 추적

> 설계 화면 → 컴포넌트 매핑

| 설계 화면 | 컴포넌트 파일 | 주요 Ant Design 컴포넌트 | 요구사항 |
|----------|--------------|-------------------------|----------|
| 품질 검사 입력 폼 (메인) | QualityInspection.tsx | Form, Card, Segmented | FR-001~008 |
| 치수 검사 필드 | DimensionInspection.tsx | Form.List, InputNumber, Tag | FR-002, FR-003 |
| 외관 검사 필드 | AppearanceInspection.tsx | Form.List, Radio, Select | FR-002, FR-003, FR-004 |
| 기능 검사 필드 | FunctionInspection.tsx | Form.List, Input, Radio | FR-002, FR-003, FR-004 |
| 이미지 업로드 영역 | QualityInspection.tsx | Upload.Dragger | FR-005 |
| 미리보기 모달 | InspectionPreview.tsx | Modal, Descriptions | FR-006 |

---

## 6. 인터랙션 추적

> 사용자 액션 → 컴포넌트 핸들러 매핑

| 사용자 액션 | 컴포넌트 | 핸들러/이벤트 | 관련 요구사항 |
|------------|----------|--------------|--------------|
| 검사 유형 변경 | Segmented | onChange | FR-001, BR-01 |
| 검사 항목 입력 | Form.Item | onChange | FR-002 |
| 항목 추가 | Button | Form.List add() | FR-003, BR-05 |
| 항목 삭제 | Button | Form.List remove() | FR-003, BR-04 |
| 검사 결과 변경 | Radio.Group | onChange | FR-004, BR-02 |
| 이미지 업로드 | Upload.Dragger | beforeUpload, onChange | FR-005, BR-06 |
| 미리보기 클릭 | Button | onClick (Modal open) | FR-006 |
| 저장 클릭 | Button | form.submit() | FR-007 |
| 초기화 클릭 | Button | form.resetFields() | FR-008 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 8 | 8 | 0 | 100% |
| 비즈니스 규칙 (BR) | 6 | 6 | 0 | 100% |
| 단위 테스트 (UT) | 15 | 15 | 0 | 100% |
| E2E 테스트 | 8 | 8 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 8 | 8 | 0 | 100% |

### 7.2 미매핑 항목

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | 모든 항목 매핑 완료 |

---

## 관련 문서

- 설계서: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md` (섹션 4.1.1)
- TRD: `.orchay/projects/mes-portal/trd.md`

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-22 | Claude | 최초 작성 |
