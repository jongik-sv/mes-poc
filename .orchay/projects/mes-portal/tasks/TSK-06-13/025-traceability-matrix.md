# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-22

> **목적**: PRD → 설계 → 테스트 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-06-13 |
| Task명 | [샘플] 조직/부서 트리 |
| 설계 문서 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-22 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------|-------------|------------|-----------|------|
| FR-001 | 4.1.1 트리 관리 샘플 | 3.2 UC-01 | - | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.1.1 트리 관리 샘플 | 3.2 UC-02 | UT-001, UT-002 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 4.1.1 트리 관리 샘플 | 3.2 UC-03 | UT-003 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 4.1.1 트리 관리 샘플 | 3.2 UC-04 | UT-004 | E2E-004 | TC-004 | 설계완료 |
| FR-005 | 4.1.1 트리 관리 샘플 | 3.2 UC-05 | UT-005 | E2E-005 | TC-005 | 설계완료 |
| FR-006 | 4.1.1 트리 관리 샘플 | 3.2 UC-06 | UT-006 | E2E-006 | TC-006 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 조직 트리 조회

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 계층형 트리 구조 표시 |
| 설계 | 010-design.md | 3.2 UC-01, 5.2 | 트리 렌더링, 펼침/접힘 |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-001 |
| 매뉴얼 | 026-test-specification.md | 4.2 | TC-001 |

#### FR-002: 노드 추가

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 노드 추가/수정/삭제 |
| 설계 | 010-design.md | 3.2 UC-02 | 컨텍스트 메뉴 → 추가 모달 |
| 단위 테스트 | 026-test-specification.md | 2.2 | UT-001, UT-002 |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-002 |

#### FR-003: 노드 수정

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 노드 추가/수정/삭제 |
| 설계 | 010-design.md | 3.2 UC-03 | 컨텍스트 메뉴 → 수정 모달 |
| 단위 테스트 | 026-test-specification.md | 2.2 | UT-003 |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-003 |

#### FR-004: 노드 삭제

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 노드 추가/수정/삭제 |
| 설계 | 010-design.md | 3.2 UC-04 | 컨텍스트 메뉴 → 삭제 확인 |
| 단위 테스트 | 026-test-specification.md | 2.2 | UT-004 |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-004 |

#### FR-005: 드래그 앤 드롭 이동

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 드래그 앤 드롭으로 위치 이동 |
| 설계 | 010-design.md | 3.2 UC-05, 6.1 | 드래그 프리뷰, 드롭 처리 |
| 단위 테스트 | 026-test-specification.md | 2.2 | UT-005 |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-005 |

#### FR-006: 검색 및 필터링

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 검색 및 필터링 |
| 설계 | 010-design.md | 3.2 UC-06, 6.1 | 검색 입력, 노드 강조 |
| 단위 테스트 | 026-test-specification.md | 2.2 | UT-006 |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-006 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | 4.1.1 | 8.1 | 삭제 핸들러 | UT-007 | E2E-007 | 루트 노드 삭제 시도 시 에러 확인 | 설계완료 |
| BR-002 | 4.1.1 | 8.1 | 드래그 핸들러 | UT-008 | E2E-008 | 자기 하위로 이동 시도 시 취소 확인 | 설계완료 |
| BR-003 | 4.1.1 | 8.1 | 추가/수정 핸들러 | UT-002 | E2E-002 | 중복 코드 입력 시 에러 확인 | 설계완료 |
| BR-004 | 4.1.1 | 8.1 | 삭제 핸들러 | UT-009 | E2E-004 | 삭제 시 하위 노드 함께 삭제 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 루트 노드 삭제 불가

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 조직/부서 트리 - 노드 추가/수정/삭제 |
| **설계 표현** | 루트 노드는 삭제 불가 (컨텍스트 메뉴 비활성화) |
| **구현 위치** | 삭제 핸들러, 컨텍스트 메뉴 렌더링 |
| **검증 방법** | 루트 노드 우클릭 시 삭제 메뉴 비활성화 확인 |
| **관련 테스트** | UT-007, E2E-007 |

#### BR-002: 순환 참조 방지

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 드래그 앤 드롭으로 위치 이동 |
| **설계 표현** | 자기 자신 또는 하위 노드로 이동 불가 |
| **구현 위치** | onDrop 핸들러 내 유효성 검사 |
| **검증 방법** | 드래그 중 불가 영역에 금지 아이콘 표시 확인 |
| **관련 테스트** | UT-008, E2E-008 |

#### BR-003: 부서 코드 유일성

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 노드 추가/수정 |
| **설계 표현** | 부서 코드는 전체 트리에서 고유해야 함 |
| **구현 위치** | 폼 유효성 검사, 저장 핸들러 |
| **검증 방법** | 중복 코드 입력 시 에러 메시지 확인 |
| **관련 테스트** | UT-002, E2E-002 |

#### BR-004: 하위 노드 연쇄 삭제

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 노드 삭제 |
| **설계 표현** | 노드 삭제 시 모든 하위 노드도 함께 삭제 |
| **구현 위치** | 삭제 핸들러 (재귀 삭제) |
| **검증 방법** | 삭제 확인 다이얼로그에 하위 노드 안내 표시 |
| **관련 테스트** | UT-009, E2E-004 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용 (build/verify 단계 결과서 생성 시 활용)

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-002 | - | 미실행 |
| UT-002 | 단위 | FR-002 | BR-003 | 미실행 |
| UT-003 | 단위 | FR-003 | - | 미실행 |
| UT-004 | 단위 | FR-004 | - | 미실행 |
| UT-005 | 단위 | FR-005 | - | 미실행 |
| UT-006 | 단위 | FR-006 | - | 미실행 |
| UT-007 | 단위 | - | BR-001 | 미실행 |
| UT-008 | 단위 | - | BR-002 | 미실행 |
| UT-009 | 단위 | FR-004 | BR-004 | 미실행 |
| E2E-001 | E2E | FR-001 | - | 미실행 |
| E2E-002 | E2E | FR-002 | BR-003 | 미실행 |
| E2E-003 | E2E | FR-003 | - | 미실행 |
| E2E-004 | E2E | FR-004 | BR-004 | 미실행 |
| E2E-005 | E2E | FR-005 | - | 미실행 |
| E2E-006 | E2E | FR-006 | - | 미실행 |
| E2E-007 | E2E | - | BR-001 | 미실행 |
| E2E-008 | E2E | - | BR-002 | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | - | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-005 | 매뉴얼 | FR-005 | - | 미실행 |
| TC-006 | 매뉴얼 | FR-006 | - | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 엔티티 → Mock 데이터 → UI 컴포넌트 매핑

| 설계 엔티티 | Mock 데이터 구조 | UI 표시 | 편집 폼 |
|------------|-----------------|---------|---------|
| Organization | TreeNode 인터페이스 | Tree.TreeNode | OrganizationForm |

### 4.1 데이터 구조 상세

```typescript
interface OrganizationNode {
  id: string;
  key: string;            // Tree 컴포넌트용 key
  title: string;          // 부서명 (표시용)
  name: string;           // 부서명
  code: string;           // 부서 코드
  parentId: string | null;
  manager?: string;       // 담당자
  contact?: string;       // 연락처
  headcount?: number;     // 인원
  description?: string;   // 설명
  children?: OrganizationNode[];
  createdAt: string;
  updatedAt: string;
}
```

---

## 5. 인터페이스 추적

> 설계 인터페이스 요구사항 → 컴포넌트 매핑 (API 없음, 프론트엔드만)

| 설계 인터페이스 | 컴포넌트/훅 | 기능 | 요구사항 |
|----------------|-------------|------|----------|
| 트리 조회 | useOrganizationTree | 데이터 로드 및 상태 관리 | FR-001 |
| 노드 추가 | addNode 함수 | 트리에 노드 추가 | FR-002 |
| 노드 수정 | updateNode 함수 | 노드 데이터 업데이트 | FR-003 |
| 노드 삭제 | deleteNode 함수 | 노드 및 하위 삭제 | FR-004 |
| 노드 이동 | moveNode 함수 | 드래그 앤 드롭 처리 | FR-005 |
| 검색 | filterTree 함수 | 검색어로 필터링 | FR-006 |

---

## 6. 화면 추적

> 설계 화면 요구사항 → 컴포넌트 매핑

| 설계 화면 | 컴포넌트 | 요구사항 |
|----------|----------|----------|
| 조직 트리 메인 | OrganizationTree.tsx | FR-001, FR-005, FR-006 |
| 트리 영역 | Ant Design Tree (draggable) | FR-001, FR-005 |
| 상세 패널 | OrganizationDetail.tsx | FR-001 |
| 추가/수정 모달 | OrganizationFormModal.tsx | FR-002, FR-003 |
| 삭제 확인 | Modal.confirm | FR-004 |
| 컨텍스트 메뉴 | Dropdown (contextMenu) | FR-002, FR-003, FR-004 |
| 검색 입력 | Input.Search | FR-006 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 6 | 6 | 0 | 100% |
| 비즈니스 규칙 (BR) | 4 | 4 | 0 | 100% |
| 단위 테스트 (UT) | 9 | 9 | 0 | 100% |
| E2E 테스트 | 8 | 8 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 6 | 6 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 관련 문서

- 설계 문서: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`

---

<!--
TSK-06-13 요구사항 추적성 매트릭스
Version: 1.0
Created: 2026-01-22
-->
