# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-21

> **목적**: PRD → 기본설계 → 상세설계 → 테스트 4단계 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-07-03 |
| Task명 | 차트 위젯 |
| 설계 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-21 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------|-------------|------------|-----------|------|
| FR-001 | 4.1.1 차트 위젯 - 라인 차트 | 5.2 화면 1 | UT-001, UT-002 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.1.1 차트 위젯 - 바 차트 | 5.2 화면 2 | UT-003, UT-004 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 4.1.1 차트 위젯 - 파이 차트 | 5.2 화면 3 | UT-005, UT-006 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 4.1.1 차트 위젯 - 툴팁 | 6.3 툴팁 설계 | UT-007 | E2E-004 | TC-004 | 설계완료 |
| FR-005 | 4.1.1 차트 위젯 - 반응형 | 5.3 반응형 동작 | UT-008 | E2E-005 | TC-005 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 라인 차트 (시간별 생산량 추이)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 라인 차트 (시간별 생산량 추이) |
| 설계 | 010-design.md | 5.2 화면 1 | LineChart 컴포넌트, X축(시간), Y축(생산량) |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001 (정상 렌더링), UT-002 (빈 데이터) |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 (차트 표시 및 호버) |

#### FR-002: 바 차트 (라인별 생산 실적)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 바 차트 (라인별 생산 실적) |
| 설계 | 010-design.md | 5.2 화면 2 | BarChart 컴포넌트, 그룹 바 (실적/목표) |
| 단위 테스트 | 026-test-specification.md | 2.2 | UT-003 (정상 렌더링), UT-004 (데이터 변환) |
| E2E 테스트 | 026-test-specification.md | 3.2 | E2E-002 (차트 표시 및 비교) |

#### FR-003: 파이 차트 (제품별 비율)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 파이 차트 (제품별 비율) |
| 설계 | 010-design.md | 5.2 화면 3 | PieChart 컴포넌트, 섹터별 비율 표시 |
| 단위 테스트 | 026-test-specification.md | 2.3 | UT-005 (정상 렌더링), UT-006 (그룹화) |
| E2E 테스트 | 026-test-specification.md | 3.3 | E2E-003 (차트 표시 및 비율) |

#### FR-004: 차트 툴팁 표시

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.1.1 | 차트 위젯 - 툴팁 표시 |
| 설계 | 010-design.md | 6.3 | 차트별 툴팁 설정, 포맷팅 |
| 단위 테스트 | 026-test-specification.md | 2.4 | UT-007 (툴팁 포맷) |
| E2E 테스트 | 026-test-specification.md | 3.4 | E2E-004 (호버 시 툴팁 확인) |

#### FR-005: 반응형 차트 크기 조절

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 5.4 | 반응형 - 데스크톱, 태블릿, 모바일 지원 |
| 설계 | 010-design.md | 5.3 | autoFit, 범례 위치 조절 |
| 단위 테스트 | 026-test-specification.md | 2.5 | UT-008 (autoFit 설정) |
| E2E 테스트 | 026-test-specification.md | 3.5 | E2E-005 (반응형 확인) |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | TRD 1.5 | 8.1 | chart-theme.ts | UT-009 | - | 테마 토큰 색상 확인 | 설계완료 |
| BR-002 | PRD 4.1.1 | 8.1 | BarChart.tsx | UT-010 | E2E-006 | 목표 미달 시 색상 변경 확인 | 설계완료 |
| BR-003 | PRD 4.1.1 | 8.1 | PieChart.tsx | UT-011 | E2E-007 | 5개 초과 시 "기타" 그룹화 확인 | 설계완료 |
| BR-004 | PRD 4.1.1 | 8.1 | 툴팁 formatter | UT-012 | - | 천 단위 콤마 적용 확인 | 설계완료 |
| BR-005 | PRD 4.1.1 | 8.1 | ChartWrapper | UT-013 | E2E-008 | 빈 데이터 시 Empty 표시 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 테마 토큰 색상 사용

| 구분 | 내용 |
|------|------|
| **PRD 원문** | TRD 1.5 CSS 중앙 집중 관리 - Ant Design Token 사용 |
| **설계 표현** | 차트 색상을 Ant Design ConfigProvider 테마와 동기화 |
| **구현 위치** | lib/theme/chart-theme.ts |
| **검증 방법** | 차트 색상이 themeTokens.colorPrimary와 일치하는지 확인 |
| **관련 테스트** | UT-009 |

#### BR-002: 목표 미달 시 색상 구분

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 대시보드에서 목표 대비 실적 표시 시 시각적 구분 |
| **설계 표현** | 실적 < 목표*0.9: 경고색, 실적 < 목표*0.7: 위험색 |
| **구현 위치** | BarChart.tsx 색상 조건부 렌더링 |
| **검증 방법** | 목표 미달 데이터로 색상 변경 확인 |
| **관련 테스트** | UT-010, E2E-006 |

#### BR-003: 파이 차트 항목 그룹화

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 차트 데이터가 많을 경우 가독성 유지 |
| **설계 표현** | 5개 초과 시 상위 5개 + "기타"로 그룹화 |
| **구현 위치** | PieChart.tsx groupSmallItems 함수 |
| **검증 방법** | 6개 이상 데이터 입력 시 "기타" 항목 생성 확인 |
| **관련 테스트** | UT-011, E2E-007 |

#### BR-004: 숫자 포맷팅

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 숫자 표시 시 가독성 향상 |
| **설계 표현** | 천 단위 콤마 적용 (toLocaleString) |
| **구현 위치** | 툴팁 formatter |
| **검증 방법** | 1234 → "1,234" 변환 확인 |
| **관련 테스트** | UT-012 |

#### BR-005: 빈 데이터 처리

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 데이터 없음 상태 안내 |
| **설계 표현** | Empty 컴포넌트로 "표시할 데이터가 없습니다" |
| **구현 위치** | ChartWrapper.tsx |
| **검증 방법** | 빈 배열 전달 시 Empty 컴포넌트 표시 확인 |
| **관련 테스트** | UT-013, E2E-008 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용 (build/verify 단계 결과서 생성 시 활용)

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-001 | BR-005 | 미실행 |
| UT-003 | 단위 | FR-002 | - | 미실행 |
| UT-004 | 단위 | FR-002 | - | 미실행 |
| UT-005 | 단위 | FR-003 | - | 미실행 |
| UT-006 | 단위 | FR-003 | BR-003 | 미실행 |
| UT-007 | 단위 | FR-004 | - | 미실행 |
| UT-008 | 단위 | FR-005 | - | 미실행 |
| UT-009 | 단위 | - | BR-001 | 미실행 |
| UT-010 | 단위 | - | BR-002 | 미실행 |
| UT-011 | 단위 | - | BR-003 | 미실행 |
| UT-012 | 단위 | - | BR-004 | 미실행 |
| UT-013 | 단위 | - | BR-005 | 미실행 |
| E2E-001 | E2E | FR-001 | - | 미실행 |
| E2E-002 | E2E | FR-002 | - | 미실행 |
| E2E-003 | E2E | FR-003 | - | 미실행 |
| E2E-004 | E2E | FR-004 | - | 미실행 |
| E2E-005 | E2E | FR-005 | - | 미실행 |
| E2E-006 | E2E | - | BR-002 | 미실행 |
| E2E-007 | E2E | - | BR-003 | 미실행 |
| E2E-008 | E2E | - | BR-005 | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | - | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-005 | 매뉴얼 | FR-005 | - | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 데이터 타입 → Mock 데이터 → 컴포넌트 Props 매핑

| 설계 타입 | Mock 데이터 키 | 컴포넌트 Props | 차트 타입 |
|----------|---------------|----------------|----------|
| ProductionTrendItem | productionTrend | LineChartProps.data | Line |
| LinePerformanceItem | linePerformance | BarChartProps.data | Column |
| LinePerformanceChartItem | (변환 후) | BarChartProps.data | Column |
| ProductRatioItem | productRatio | PieChartProps.data | Pie |

---

## 5. 인터페이스 추적

> 설계 인터페이스 → 컴포넌트 Props 매핑

| 설계 인터페이스 | 컴포넌트 | Props 타입 | 요구사항 |
|----------------|----------|-----------|----------|
| ChartProps<ProductionTrendItem> | LineChart | LineChartProps | FR-001 |
| ChartProps<LinePerformanceChartItem> | BarChart | BarChartProps | FR-002 |
| ChartProps<ProductRatioItem> | PieChart | PieChartProps | FR-003 |
| ChartWrapperProps | ChartWrapper | ChartWrapperProps | FR-004, FR-005 |

---

## 6. 화면 추적

> 설계 화면 → 컴포넌트 매핑

| 설계 화면 | 컴포넌트 | data-testid | 요구사항 |
|----------|----------|-------------|----------|
| 시간별 생산량 라인 차트 | LineChart | chart-line-production | FR-001 |
| 라인별 생산 실적 바 차트 | BarChart | chart-bar-performance | FR-002 |
| 제품별 비율 파이 차트 | PieChart | chart-pie-ratio | FR-003 |
| 차트 래퍼 (로딩/에러) | ChartWrapper | chart-loading, chart-error | FR-004, FR-005 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 5 | 5 | 0 | 100% |
| 비즈니스 규칙 (BR) | 5 | 5 | 0 | 100% |
| 단위 테스트 (UT) | 13 | 13 | 0 | 100% |
| E2E 테스트 | 8 | 8 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 5 | 5 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 관련 문서

- 설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/mes-portal/prd.md`
- TRD: `.orchay/projects/mes-portal/trd.md`
- TSK-07-01 설계: `.orchay/projects/mes-portal/tasks/TSK-07-01/010-design.md`

---

<!--
author: Claude
Template Version History:
- v1.0.0 (2026-01-21): TSK-07-03 차트 위젯 추적성 매트릭스 작성
-->
