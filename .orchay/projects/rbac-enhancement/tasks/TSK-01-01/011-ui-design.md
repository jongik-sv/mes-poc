# TSK-01-01 UI 설계서 - 역할그룹 정의 화면

## 1. 전체 레이아웃 와이어프레임

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│ [페이지 제목: 역할그룹 정의]                                                      │
├─────────────────────────┬───────────────────────┬───────────────────────────────┤
│ ■ 역할그룹 목록 (35%)    │ ■ 역할 관리 (33%)      │ ■ 권한 관리 (32%)              │
│ ┌─────────────────────┐ │                       │                               │
│ │ Card                │ │ Card                  │ Card                          │
│ │ ┌─ Header ────────┐ │ │ ┌─ Header ─────────┐ │ ┌─ Header ──────────┐        │
│ │ │ "역할그룹 목록"  │ │ │ │ "역할 관리"       │ │ │ "권한 관리"        │        │
│ │ │ extra: [+ 등록]  │ │ │ │ subtitle:         │ │ │ subtitle:          │        │
│ │ └─────────────────┘ │ │ │ "« 역할그룹명 »"  │ │ │ "« 역할명 »"       │        │
│ │                     │ │ │ extra: [+ 등록]    │ │ │ extra: [+ 등록]    │        │
│ │ ┌─ 필터 영역 ─────┐ │ │ └──────────────────┘ │ └────────────────────┘        │
│ │ │ [🔍 검색______] │ │ │                       │                               │
│ │ │ [시스템▼][상태▼] │ │ │ ┌─ 필터 ──────────┐ │ ┌─ 필터 ─────────────┐        │
│ │ └─────────────────┘ │ │ │ [🔍 검색___]     │ │ │ [🔍 검색____]      │        │
│ │                     │ │ │ [상태▼]          │ │ │ [유형▼]            │        │
│ │ ┌─ Table ─────────┐ │ │ └──────────────────┘ │ └────────────────────┘        │
│ │ │ 코드│이름│시스템 │ │ │                       │                               │
│ │ │    │    │상태  │ │ │ Divider "할당된 역할"  │ Divider "할당된 권한"          │
│ │ │    │    │액션  │ │ │ ┌─ Table ────────────┐ │ ┌─ Table ──────────────┐      │
│ │ │ ───┼────┼───── │ │ │ │ 이름│코드│상태│액션│ │ │ 이름│코드│유형│액션   │      │
│ │ │ row│    │      │ │ │ └──────────────────────│ └──────────────────────┘      │
│ │ │ row│    │ 클릭→ │ │ │                       │                               │
│ │ │ row│    │      │ │ │ Divider "전체 역할"    │ Divider "전체 권한"            │
│ │ └─────────────────┘ │ │ ┌─ Table (☑) ──────┐ │ ┌─ Table (☑) ────────┐       │
│ │                     │ │ │ ☑│이름│코드│상태  │ │ │ ☑│이름│코드│유형    │       │
│ │ ┌─ Pagination ────┐ │ │ │ ☑ = 할당여부     │ │ │ ☑ = 할당여부        │       │
│ │ │ < 1 2 3 ... >   │ │ │ └──────────────────┘ │ └────────────────────┘        │
│ │ └─────────────────┘ │ │                       │                               │
│ └─────────────────────┘ │ [할당 저장] [새로고침] │ [할당 저장] [새로고침]         │
├─────────────────────────┴───────────────────────┴───────────────────────────────┤
```

### 1.1 레이아웃 CSS 구조

```
page (h-full flex flex-col)
├── Typography.Title "역할그룹 정의"
└── div (flex-1 overflow-hidden flex gap-4)
    ├── div (w-[35%] h-full) → 역할그룹 Card
    ├── div (w-[33%] h-full) → 역할 Card
    └── div (w-[32%] h-full) → 권한 Card
```

각 Card 내부:
```
Card (h-full flex flex-col)
├── 필터 영역
├── Divider
├── Table (flex-1 overflow-auto) — 할당된
├── Divider
├── Table (flex-1 overflow-auto) — 전체 (체크박스)
└── 하단 버튼 영역
```

## 2. 상태 전이

### 2.1 초기 상태 (미선택)

```
┌───────────────────┬───────────────────────┬──────────────────────┐
│ 역할그룹 목록      │                       │                      │
│ (데이터 로드됨)    │   역할그룹을 선택하면   │   역할을 선택하면     │
│                   │   역할 목록이          │   권한 목록이         │
│   row 1           │   표시됩니다.          │   표시됩니다.         │
│   row 2           │   (Empty 컴포넌트)     │   (Empty 컴포넌트)    │
│   row 3           │                       │                      │
└───────────────────┴───────────────────────┴──────────────────────┘
```

- 중앙 패널: `Empty` + "역할그룹을 선택하면 역할 목록이 표시됩니다."
- 우측 패널: `Empty` + "역할을 선택하면 권한 목록이 표시됩니다."
- 필터/버튼 영역 비활성(disabled) 또는 숨김

### 2.2 역할그룹 선택됨

```
┌───────────────────┬───────────────────────┬──────────────────────┐
│ 역할그룹 목록      │ 역할 관리              │                      │
│                   │ « 생산관리자 그룹 »     │   역할을 선택하면     │
│   row 1 (active)  │                       │   권한 목록이         │
│   row 2           │ 할당된 역할 (2건)      │   표시됩니다.         │
│   row 3           │ ┌──────────────┐      │   (Empty 컴포넌트)    │
│                   │ │ 생산관리자    │      │                      │
│                   │ │ 품질관리자    │      │                      │
│                   │ └──────────────┘      │                      │
│                   │ 전체 역할 (☑ 5건)     │                      │
│                   │ ┌──────────────┐      │                      │
│                   │ │ ☑ 생산관리자 │      │                      │
│                   │ │ ☑ 품질관리자 │      │                      │
│                   │ │ ☐ 설비관리자 │      │                      │
│                   │ └──────────────┘      │                      │
│                   │ [할당 저장]            │                      │
└───────────────────┴───────────────────────┴──────────────────────┘
```

- 역할그룹 행 클릭 → `selectedRoleGroup` 설정
- 중앙 활성화, 우측은 여전히 Empty
- `selectedRole` 초기화 (null)

### 2.3 역할 선택됨

```
┌───────────────────┬───────────────────────┬──────────────────────┐
│ 역할그룹 목록      │ 역할 관리              │ 권한 관리             │
│                   │ « 생산관리자 그룹 »     │ « 생산관리자 »        │
│   row 1 (active)  │                       │                      │
│                   │ 할당된 역할            │ 할당된 권한 (3건)     │
│                   │ ┌──────────────┐      │ ┌────────────────┐   │
│                   │ │ 생산관리자 ← │      │ │ 생산메뉴접근    │   │
│                   │ │ 품질관리자    │      │ │ 생산데이터조회  │   │
│                   │ └──────────────┘      │ │ 생산데이터수정  │   │
│                   │                       │ └────────────────┘   │
│                   │ 전체 역할 (☑)         │ 전체 권한 (☑ 10건)   │
│                   │ ...                   │ ☑ / ☐ 체크박스       │
│                   │ [할당 저장]            │ [할당 저장]           │
└───────────────────┴───────────────────────┴──────────────────────┘
```

- 할당된 역할 행 클릭 → `selectedRole` 설정
- 우측 패널 활성화

## 3. 패널별 UI 컴포넌트 상세

### 3.1 좌측 패널 — 역할그룹 목록

| 영역 | 컴포넌트 | Props/설정 |
|------|---------|-----------|
| 컨테이너 | `Card` | `title="역할그룹 목록"`, `extra={<Button 등록>}` |
| 검색 | `Input.Search` | `placeholder="이름/코드 검색"`, `allowClear` |
| 시스템 필터 | `Select` | `placeholder="시스템"`, `allowClear`, `options={systems}` |
| 상태 필터 | `Select` | `placeholder="상태"`, `options=[활성,비활성]` |
| 테이블 | `Table` | `size="small"`, `rowClassName` 선택행 하이라이트, `onRow.onClick` |
| 페이지네이션 | Table 내장 | `pagination={{ pageSize: 15, size: 'small' }}` |

### 3.2 중앙 패널 — 역할 관리

| 영역 | 컴포넌트 | Props/설정 |
|------|---------|-----------|
| 컨테이너 | `Card` | `title="역할 관리"`, subtitle 동적 |
| 안내 (미선택) | `Empty` | `description="역할그룹을 선택하면 역할 목록이 표시됩니다."` |
| 검색 | `Input.Search` | `placeholder="역할 검색"` |
| 상태 필터 | `Select` | `placeholder="상태"` |
| 구분선 | `Divider` | `orientation="left"`, `children="할당된 역할"` / `"전체 역할"` |
| 할당 테이블 | `Table` | `size="small"`, `onRow.onClick` → 권한 패널 갱신 |
| 전체 테이블 | `Table` | `size="small"`, `rowSelection={{ type: 'checkbox' }}` |
| 등록 버튼 | `Button` | `type="primary"`, Card extra |
| 할당 저장 | `Button` | `type="primary"` |
| 새로고침 | `Button` | `icon={<ReloadOutlined />}` |

### 3.3 우측 패널 — 권한 관리

| 영역 | 컴포넌트 | Props/설정 |
|------|---------|-----------|
| 컨테이너 | `Card` | `title="권한 관리"`, subtitle 동적 |
| 안내 (미선택) | `Empty` | `description="역할을 선택하면 권한 목록이 표시됩니다."` |
| 검색 | `Input.Search` | `placeholder="권한 검색"` |
| 유형 필터 | `Select` | `placeholder="유형"`, `options=[메뉴,API,데이터]` |
| 구분선 | `Divider` | `orientation="left"` |
| 할당 테이블 | `Table` | `size="small"` |
| 전체 테이블 | `Table` | `size="small"`, `rowSelection={{ type: 'checkbox' }}` |
| 할당 저장 | `Button` | `type="primary"` |

## 4. 모달 설계

### 4.1 역할그룹 등록/수정 모달

```
┌─────────────────────────────────┐
│ 역할그룹 등록 (또는 수정)     [X] │
├─────────────────────────────────┤
│ 역할그룹 코드 *                  │
│ [________________] (수정 시 읽기전용) │
│                                  │
│ 역할그룹 이름 *                  │
│ [________________]               │
│                                  │
│ 시스템 *                         │
│ [시스템 선택 ▼___]               │
│                                  │
│ 설명                             │
│ [________________]               │
│ [________________]               │
│                                  │
│ 활성상태  [●━━ ON]               │
├─────────────────────────────────┤
│              [취소]  [저장]       │
└─────────────────────────────────┘
```

- `Modal` + `Form` + `Form.Item`
- `destroyOnClose`
- 저장 성공 시 `message.success`, 목록 재조회

### 4.2 역할 등록/수정 모달

```
┌─────────────────────────────────┐
│ 역할 등록 (또는 수정)         [X] │
├─────────────────────────────────┤
│ 역할 코드 *                      │
│ [________________] (수정 시 읽기전용) │
│                                  │
│ 역할 이름 *                      │
│ [________________]               │
│                                  │
│ 설명                             │
│ [________________]               │
│                                  │
│ 활성상태  [●━━ ON]               │
├─────────────────────────────────┤
│              [취소]  [저장]       │
└─────────────────────────────────┘
```

### 4.3 권한 등록/수정 모달

```
┌─────────────────────────────────┐
│ 권한 등록 (또는 수정)         [X] │
├─────────────────────────────────┤
│ 권한 코드 *                      │
│ [________________] (수정 시 읽기전용) │
│                                  │
│ 권한 이름 *                      │
│ [________________]               │
│                                  │
│ 유형 *                           │
│ [메뉴/API/데이터 ▼]             │
│                                  │
│ 설명                             │
│ [________________]               │
│                                  │
│ 활성상태  [●━━ ON]               │
├─────────────────────────────────┤
│              [취소]  [저장]       │
└─────────────────────────────────┘
```

### 4.4 삭제 확인

- `Popconfirm` 사용 (모달 아님)
- `title="정말 삭제하시겠습니까?"`
- `okText="삭제"`, `cancelText="취소"`
- `okButtonProps={{ danger: true }}`

## 5. 인터랙션 흐름 요약

| 사용자 동작 | UI 반응 |
|------------|---------|
| 페이지 진입 | 역할그룹 목록 로드, 중앙/우측 Empty 표시 |
| 역할그룹 행 클릭 | 행 하이라이트, 중앙 패널 활성화 + 데이터 로드, 우측 Empty 유지 |
| 다른 역할그룹 클릭 | 중앙 갱신, 우측 Empty로 초기화 |
| 할당된 역할 행 클릭 | 행 하이라이트, 우측 패널 활성화 + 데이터 로드 |
| 전체 역할 체크박스 변경 | `selectedRoleIds` 업데이트, [할당 저장] 버튼 활성화 |
| [할당 저장] 클릭 | API 호출, 성공 시 할당된 역할 재조회 |
| [등록] 클릭 | 해당 모달 열림 (빈 폼) |
| 액션 [수정] 클릭 | 해당 모달 열림 (데이터 채움) |
| 액션 [삭제] 클릭 | Popconfirm → 확인 시 삭제 API 호출 |
