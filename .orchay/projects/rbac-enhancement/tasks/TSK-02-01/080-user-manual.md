# TSK-02-01 사용자 매뉴얼 - 사용자 역할그룹 할당 화면

## 1. 화면 개요

사용자 권한 할당 화면은 각 사용자에게 역할그룹을 할당하고, 할당 결과에 따라 접근 가능한 메뉴를 실시간으로 미리보기할 수 있는 화면입니다. 3-column 레이아웃으로 사용자 선택, 역할그룹 할당, 메뉴 시뮬레이션을 한 화면에서 수행합니다.

## 2. 접근 경로

**메뉴 경로:** 시스템 관리 > 사용자 권한 할당

**URL:** `/system/authority`

## 3. 기능 설명

### 3.1 사용자 목록 (좌측 패널, 30%)

#### 사용자 조회
1. 페이지 진입 시 전체 사용자 목록이 테이블에 표시됩니다.
2. 테이블 컬럼: 이름, 이메일, 상태(활성/비활성)

#### 검색 및 필터
1. 상단 검색창에 사용자 이름 또는 이메일을 입력하여 검색합니다.
2. "상태" 드롭다운으로 활성/비활성 사용자를 필터링합니다.

#### 사용자 선택
- 사용자 행을 클릭하면 중앙(역할그룹 할당)과 우측(메뉴 시뮬레이션) 패널이 해당 사용자의 데이터로 갱신됩니다.

### 3.2 역할그룹 할당 (중앙 패널, 35%)

#### 보유 역할그룹 확인
1. 사용자를 선택하면 상단에 현재 보유한 역할그룹이 read-only 테이블로 표시됩니다.
2. 컬럼: 이름, 코드, 상태

#### 역할그룹 할당 변경
1. 하단 "전체 역할그룹" 테이블에서 체크박스를 선택/해제하여 할당을 변경합니다.
2. 현재 보유한 역할그룹은 체크 상태로 표시됩니다.
3. 체크박스를 변경하면 우측 메뉴 시뮬레이션이 자동으로 갱신됩니다 (300ms 대기 후).

#### 할당 저장
1. 체크박스 변경 후 [저장] 버튼을 클릭합니다.
2. 저장 성공 시 "저장되었습니다" 메시지가 표시되고, 보유 역할그룹 테이블이 갱신됩니다.

### 3.3 메뉴 시뮬레이션 (우측 패널, 35%)

#### 메뉴 트리 확인
1. 사용자를 선택하면 해당 사용자가 접근 가능한 메뉴가 트리 구조로 표시됩니다.
2. 카테고리(폴더 아이콘)와 개별 메뉴(문서 아이콘)가 계층적으로 표시됩니다.
3. 모든 트리 노드는 기본적으로 펼쳐진 상태로 표시됩니다.

#### 실시간 시뮬레이션
1. 중앙 패널에서 역할그룹 체크박스를 변경하면, 변경된 역할그룹 조합에 따른 메뉴 트리가 실시간으로 갱신됩니다.
2. 저장하기 전에 메뉴 변경 결과를 미리 확인할 수 있습니다.
3. 연속으로 체크박스를 변경할 경우 마지막 변경 후 300ms가 경과한 시점에 갱신됩니다.

#### 요약 정보
- 트리 하단에 "접근 가능 메뉴: N개 메뉴 / M개 카테고리" 형태로 요약 정보가 표시됩니다.

### 3.4 미저장 변경사항 경고

1. 역할그룹 체크박스를 변경한 후 저장하지 않고 다른 사용자를 클릭하면 경고 팝업이 표시됩니다.
2. [전환]: 변경사항을 버리고 다른 사용자로 전환합니다.
3. [취소]: 현재 사용자를 유지하고 변경사항을 계속 편집합니다.

## 4. 주의사항

- 사용자를 선택하지 않으면 중앙/우측 패널에 "사용자를 선택해주세요" 안내가 표시됩니다.
- 메뉴 시뮬레이션 트리는 read-only이며, 클릭해도 해당 메뉴 페이지로 이동하지 않습니다.
- 체크박스 변경만으로는 실제 할당이 변경되지 않습니다. 반드시 [저장] 버튼을 클릭해야 합니다.
- 메뉴 시뮬레이션은 체크박스 변경 후 300ms 대기 후 갱신되므로, 빠르게 여러 체크박스를 변경할 경우 마지막 결과만 반영됩니다.
- 비활성 메뉴는 시뮬레이션 결과에 포함되지 않습니다.
