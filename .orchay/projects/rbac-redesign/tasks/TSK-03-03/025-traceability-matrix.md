# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-27

> **목적**: PRD → 기본설계 → 상세설계 → 테스트 4단계 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-03-03 |
| Task명 | 권한 통합 관리 화면 |
| 설계 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2026-01-27 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 기본설계 → 상세설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 기본설계 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|--------------|----------|-------------|------------|-----------|------|
| FR-001 | 4.3 | 3.1 | 5.2 | UT-001 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 4.3 | 3.2 | 5.2 | UT-002 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 4.3 | 3.3 | 5.2 | UT-003 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 4.3 | 3.4 | 5.2 | UT-004, UT-005 | E2E-004 | TC-004 | 설계완료 |
| FR-005 | 4.3 | 3.5 | 5.2 | UT-006 | E2E-005 | TC-005 | 설계완료 |
| FR-006 | 4.3 | 3.6 | 6.1 | UT-007 | E2E-006 | TC-006 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 사용자 목록 표시 및 선택

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.3 | 사용자 목록에서 대상 사용자 선택 |
| 설계 | 010-design.md | 5.2 | 1단 사용자 컬럼: 목록 + 검색/상태 필터 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 |

#### FR-002: 역할그룹 보유/전체 목록 및 할당

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.3 | 사용자별 역할그룹 할당/해제 |
| 설계 | 010-design.md | 5.2 | 2단 역할그룹 컬럼: 상단(보유) + 하단(전체 체크박스) |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-002 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002 |

#### FR-003: 역할 보유/전체 목록 표시

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.3 | 역할그룹별 역할 확인 |
| 설계 | 010-design.md | 5.2 | 3단 역할 컬럼: 상단(보유) + 하단(전체 체크박스) |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-003 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003 |

#### FR-004: 권한 보유/전체 목록 표시

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.3 | 역할별 권한 확인 |
| 설계 | 010-design.md | 5.2 | 4단 권한 컬럼: 상단(보유) + 하단(전체 체크박스) |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-004, UT-005 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-004 |

#### FR-005: 필터링 기능

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.3 | 검색, 상태, 소유여부, 레벨, 메뉴, 액션 필터 |
| 설계 | 010-design.md | 5.2 | 각 컬럼 상단 필터 영역 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-006 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-005 |

#### FR-006: 변경 확인 모달 및 저장

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 4.3 | 변경사항 확인 후 저장 |
| 설계 | 010-design.md | 5.2, 6.1 | 변경 확인 모달: 추가(녹색)/제거(적색) 표시 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-007 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-006 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | 4.3 | 8.1 | Component (상위 선택 이벤트) | UT-008 | E2E-007 | 사용자 선택 시 역할그룹 갱신 확인 | 설계완료 |
| BR-002 | 4.3 | 8.1 | Component (변경 확인 모달) | UT-009 | E2E-008 | 저장 전 모달 표시 확인 | 설계완료 |
| BR-003 | 4.3 | 8.1 | Component (읽기전용 목록) | UT-010 | E2E-009 | 보유 목록 클릭 시 편집 불가 확인 | 설계완료 |
| BR-004 | 4.3 | 8.1 | Component (체크박스) | UT-011 | E2E-010 | 하단 전체 목록에서만 체크박스 표시 확인 | 설계완료 |
| BR-005 | 4.3 | 8.1 | Component (필터) | UT-012 | E2E-011 | 소유여부 필터 동작 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 상위 선택 시 하위 자동 갱신

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 사용자 선택 → 역할그룹, 역할그룹 선택 → 역할, 역할 선택 → 권한 자동 갱신 |
| **설계 표현** | 010-design.md 섹션 8.2 BR-01 |
| **구현 위치** | AuthorityPage 컴포넌트 상태 관리 |
| **검증 방법** | 상위 선택 변경 시 하위 API 호출 및 데이터 갱신 확인 |
| **관련 테스트** | UT-008, E2E-007 |

#### BR-002: 변경 확인 모달 필수

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 할당 변경 시 추가/제거 항목을 모달로 확인 후 저장 |
| **설계 표현** | 010-design.md 섹션 8.2 BR-02 |
| **구현 위치** | ConfirmChangesModal 컴포넌트 |
| **검증 방법** | [저장] 클릭 시 모달 표시, 추가/제거 항목 구분 확인 |
| **관련 테스트** | UT-009, E2E-008 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-002 | - | 미실행 |
| UT-003 | 단위 | FR-003 | - | 미실행 |
| UT-004 | 단위 | FR-004 | - | 미실행 |
| UT-005 | 단위 | FR-004 | - | 미실행 |
| UT-006 | 단위 | FR-005 | - | 미실행 |
| UT-007 | 단위 | FR-006 | - | 미실행 |
| UT-008 | 단위 | - | BR-001 | 미실행 |
| UT-009 | 단위 | - | BR-002 | 미실행 |
| UT-010 | 단위 | - | BR-003 | 미실행 |
| UT-011 | 단위 | - | BR-004 | 미실행 |
| UT-012 | 단위 | - | BR-005 | 미실행 |
| E2E-001 | E2E | FR-001 | - | 미실행 |
| E2E-002 | E2E | FR-002 | - | 미실행 |
| E2E-003 | E2E | FR-003 | - | 미실행 |
| E2E-004 | E2E | FR-004 | - | 미실행 |
| E2E-005 | E2E | FR-005 | - | 미실행 |
| E2E-006 | E2E | FR-006 | - | 미실행 |
| E2E-007 | E2E | - | BR-001 | 미실행 |
| E2E-008 | E2E | - | BR-002 | 미실행 |
| E2E-009 | E2E | - | BR-003 | 미실행 |
| E2E-010 | E2E | - | BR-004 | 미실행 |
| E2E-011 | E2E | - | BR-005 | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | - | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-005 | 매뉴얼 | FR-005 | - | 미실행 |
| TC-006 | 매뉴얼 | FR-006 | - | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 엔티티 → API DTO 매핑

| 설계 엔티티 | API Request DTO | API Response DTO |
|------------|-----------------|------------------|
| User | - | UserResponseDto (id, name, email, status) |
| RoleGroup | AssignRoleGroupDto | RoleGroupResponseDto (id, code, name, systemId) |
| Role | AssignRoleDto | RoleResponseDto (id, code, name) |
| Permission | AssignPermissionDto | PermissionResponseDto (id, code, name, actions, menuId) |

---

## 5. 인터페이스 추적

> 설계 인터페이스 요구사항 → API 엔드포인트 매핑

| 설계 인터페이스 | API명 | Method | Endpoint | 요구사항 |
|----------------|-------|--------|----------|----------|
| 사용자 목록 조회 | getUserList | GET | /api/users | FR-001 |
| 사용자별 역할그룹 조회 | getUserRoleGroups | GET | /api/users/:id/role-groups | FR-002 |
| 역할그룹별 역할 조회 | getRoleGroupRoles | GET | /api/role-groups/:id/roles | FR-003 |
| 역할별 권한 조회 | getRolePermissions | GET | /api/roles/:id/permissions | FR-004 |
| 사용자 역할그룹 할당 | assignUserRoleGroups | PUT | /api/users/:id/role-groups | FR-002, FR-006 |
| 역할그룹 역할 할당 | assignRoleGroupRoles | PUT | /api/role-groups/:id/roles | FR-003, FR-006 |
| 역할 권한 할당 | assignRolePermissions | PUT | /api/roles/:id/permissions | FR-004, FR-006 |

---

## 6. 화면 추적

> 설계 화면 요구사항 → 컴포넌트 매핑

| 설계 화면 | 컴포넌트 | 요구사항 |
|----------|----------|----------|
| 권한 통합 관리 페이지 | AuthorityPage | FR-001~FR-006 |
| 사용자 컬럼 | UserColumn | FR-001, FR-005 |
| 역할그룹 컬럼 | RoleGroupColumn | FR-002, FR-005 |
| 역할 컬럼 | RoleColumn | FR-003, FR-005 |
| 권한 컬럼 | PermissionColumn | FR-004, FR-005 |
| 변경 확인 모달 | ConfirmChangesModal | FR-006 |
| 컬럼 필터 | ColumnFilter | FR-005 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 6 | 6 | 0 | 100% |
| 비즈니스 규칙 (BR) | 5 | 5 | 0 | 100% |
| 단위 테스트 (UT) | 12 | 12 | 0 | 100% |
| E2E 테스트 | 11 | 11 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 6 | 6 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 관련 문서

- 설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/rbac-redesign/prd.md`
