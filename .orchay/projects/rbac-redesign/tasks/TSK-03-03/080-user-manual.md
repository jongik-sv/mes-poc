# 사용자 매뉴얼 (080-manual.md)

**Template Version:** 1.0.0 — **Last Updated:** 2026-01-27

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-03-03 |
| Task명 | 권한 통합 관리 화면 |
| 대상 기능 | 권한 통합 관리 |
| 작성일 | 2026-01-27 |
| 버전 | 1.0.0 |

---

# 사용자 매뉴얼: 권한 통합 관리

**버전:** 1.0.0 — **최종 수정일:** 2026-01-27

---

## 1. 개요

사용자별 역할그룹, 역할, 권한을 한 화면에서 확인하고 할당/해제할 수 있는 통합 관리 화면입니다.

### 1.1 화면 구성

```
┌──────────────────────────────────────────────────────────────────────────────────┐
│  권한 통합 관리                                                                   │
├──────────────────┬──────────────────┬──────────────────┬─────────────────────────┤
│  사용자 목록      │  역할그룹         │  역할             │  권한                    │
│  [검색] [상태]    │                  │                  │                         │
│                  │  ── 보유 ──       │  ── 보유 ──      │  ── 보유 ──              │
│  > 홍길동        │  관리자 그룹      │  관리자           │  사용자 조회             │
│    김철수        │                  │                  │                         │
│                  │  ── 전체 ──       │  ── 전체 ──      │  ── 전체 ──              │
│                  │  ☑ 관리자 그룹    │  ☑ 관리자        │  ☑ 사용자 조회           │
│                  │  ☐ 사용자 그룹    │  ☐ 일반 사용자   │  ☐ 사용자 수정           │
│                  │       [저장]      │       [저장]     │       [저장]             │
└──────────────────┴──────────────────┴──────────────────┴─────────────────────────┘
```

### 1.2 주요 기능 요약

| 영역/기능 | 설명 |
|----------|------|
| 사용자 목록 (1단) | 전체 사용자를 검색/필터하여 선택 |
| 역할그룹 (2단) | 선택한 사용자의 보유 역할그룹 확인 및 할당/해제 |
| 역할 (3단) | 선택한 역할그룹의 보유 역할 확인 및 할당/해제 |
| 권한 (4단) | 선택한 역할의 보유 권한 확인 및 할당/해제 |
| 변경 확인 모달 | 저장 전 추가/제거 항목을 확인 |

---

## 2. 시나리오별 사용 가이드

### 시나리오 1: 사용자의 권한 구조 확인하기

**목표**: 특정 사용자가 어떤 역할그룹, 역할, 권한을 보유하는지 확인

#### 단계별 안내

**Step 1.** 사이드바에서 **시스템 관리 > 권한 통합 관리** 메뉴를 클릭합니다.

**Step 2.** 1단 사용자 목록에서 확인할 사용자를 클릭합니다.
- 검색란에 이름 또는 이메일을 입력하면 목록이 필터링됩니다.
- 상태 필터로 활성/비활성 사용자를 구분할 수 있습니다.

**Step 3.** 2단 역할그룹 컬럼의 **상단(보유 역할그룹)** 에서 현재 할당된 역할그룹을 확인합니다.

**Step 4.** 보유 역할그룹 중 하나를 클릭하면 3단에 해당 역할그룹의 역할이 표시됩니다.

**Step 5.** 보유 역할 중 하나를 클릭하면 4단에 해당 역할의 권한이 표시됩니다.

> **Tip**: 각 컬럼의 상단(보유) 영역은 읽기전용이므로, 계층 구조를 탐색하는 데 사용합니다.

---

### 시나리오 2: 사용자에게 역할그룹 할당하기

**목표**: 특정 사용자에게 새로운 역할그룹을 할당

#### 단계별 안내

**Step 1.** 1단 사용자 목록에서 대상 사용자를 클릭합니다.

**Step 2.** 2단 역할그룹 컬럼의 **하단(전체 역할그룹)** 에서 할당할 역할그룹의 체크박스를 선택합니다.

| 항목 | 설명 |
|------|------|
| ☑ 체크됨 | 이미 할당된 역할그룹 또는 새로 할당 예정 |
| ☐ 미체크 | 미할당 역할그룹 |

**Step 3.** [저장] 버튼을 클릭합니다.

**Step 4.** 변경 확인 모달에서 추가/제거 항목을 확인합니다.
- 추가 항목: 녹색 태그로 표시
- 제거 항목: 적색 태그로 표시

**Step 5.** [확인]을 클릭하면 저장됩니다. [취소]를 클릭하면 모달이 닫히고 변경사항이 유지됩니다.

> **주의**: [확인]을 클릭해야 실제 서버에 저장됩니다. 모달의 [취소]는 저장만 취소하며, 화면의 체크 상태는 유지됩니다.

---

### 시나리오 3: 역할그룹 해제하기

**목표**: 특정 사용자에서 역할그룹을 제거

#### 단계별 안내

**Step 1.** 1단 사용자 목록에서 대상 사용자를 클릭합니다.

**Step 2.** 2단 역할그룹 컬럼의 **하단(전체 역할그룹)** 에서 해제할 역할그룹의 체크박스를 해제합니다.

**Step 3.** [저장] 버튼을 클릭합니다.

**Step 4.** 변경 확인 모달에서 제거 항목(적색)을 확인하고 [확인]을 클릭합니다.

```
┌──────────────────────────────────┐
│  변경 확인                    ✕  │
├──────────────────────────────────┤
│  역할그룹 변경 사항:             │
│  제거: [품질조회그룹]  ← 적색    │
├──────────────────────────────────┤
│           [취소]    [확인]       │
└──────────────────────────────────┘
```

---

### 시나리오 4: 역할그룹의 역할 할당 변경하기

**목표**: 특정 역할그룹에 역할을 추가하거나 제거

#### 단계별 안내

**Step 1.** 사용자를 선택한 후 2단에서 역할그룹을 클릭합니다.

**Step 2.** 3단 역할 컬럼의 **하단(전체 역할)** 에서 체크박스를 변경합니다.

**Step 3.** [저장] 버튼을 클릭하고 변경 확인 모달에서 [확인]을 클릭합니다.

---

### 시나리오 5: 역할의 권한 할당 변경하기

**목표**: 특정 역할에 권한을 추가하거나 제거

#### 단계별 안내

**Step 1.** 사용자 선택 → 역할그룹 선택 → 역할 선택 순서로 진행합니다.

**Step 2.** 4단 권한 컬럼의 **하단(전체 권한)** 에서 체크박스를 변경합니다.

**Step 3.** [저장] 버튼을 클릭하고 변경 확인 모달에서 [확인]을 클릭합니다.

---

## 3. 키보드 단축키

| 키 | 동작 |
|----|------|
| **Esc** | 변경 확인 모달 닫기 |
| **Enter** | 변경 확인 모달에서 [확인] 실행 |

---

## 4. 상태별 화면

| 상태 | 화면 |
|------|------|
| 초기 로딩 | 사용자 목록 로딩 스피너 표시 |
| 사용자 미선택 | 2~4단 컬럼이 빈 상태 |
| 역할그룹 미선택 | 3~4단 컬럼이 빈 상태 |
| 역할 미선택 | 4단 컬럼이 빈 상태 |
| 데이터 없음 | 해당 컬럼 테이블에 빈 상태 표시 |
| 저장 성공 | "저장되었습니다" 토스트 메시지 |
| 에러 발생 | "저장 중 오류가 발생했습니다" 토스트 메시지 |

---

## 5. FAQ / 트러블슈팅

### Q1. 저장 버튼이 비활성화되어 있습니다.
- 상위 항목이 선택되지 않은 상태입니다. 역할그룹 저장은 사용자를, 역할 저장은 역할그룹을, 권한 저장은 역할을 먼저 선택해야 합니다.

### Q2. 변경 확인 모달에 "변경 사항이 없습니다"라고 표시됩니다.
- 체크박스 상태가 원래와 동일합니다. 실제로 체크/해제를 변경한 후 저장하세요.

### Q3. 저장 후 상단 보유 목록이 바로 갱신되지 않습니다.
- 저장 성공 시 자동으로 보유 목록이 다시 로드됩니다. 네트워크 지연이 있을 수 있습니다.

### Q4. 사용자를 다시 선택하면 이전 변경사항이 사라집니다.
- 저장하지 않은 체크박스 변경사항은 사용자를 변경하면 초기화됩니다. 변경 후 반드시 [저장]을 먼저 수행하세요.

---

## 6. 접근성

### 6.1 키보드 지원
- Tab 키로 컬럼 간 이동 가능
- 체크박스 Space 키로 토글 가능
- 모달 Esc 키로 닫기 가능

### 6.2 스크린 리더
- Ant Design 컴포넌트 내장 ARIA 속성 활용
- 테이블 컬럼 헤더에 제목 정보 제공
- 모달 제목 "변경 확인" 읽기 지원

### 6.3 색상 대비
- Ant Design 기본 테마 WCAG AA 기준 충족
- 추가(녹색)/제거(적색) 태그는 텍스트로도 "추가"/"제거" 라벨 병기

---

## 7. 관련 문서

| 문서 | 경로 |
|------|------|
| 설계서 | `tasks/TSK-03-03/010-design.md` |
| 구현 보고서 | `tasks/TSK-03-03/030-implementation.md` |
| 테스트 결과서 | `tasks/TSK-03-03/070-tdd-test-results.md` |

---

## 8. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2026-01-27 | 초기 작성 |
